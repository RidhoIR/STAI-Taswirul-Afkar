import{r as x,X as w,G as P,j as e}from"./app-B_T-3KC3.js";import{B as g}from"./button-CRYzrFA3.js";import{D as E,a as R,b as B,c as H,d as F,e as V}from"./dialog-C68XoqUr.js";import{I as c}from"./input-C7OU6nGP.js";import{L as o}from"./label-C44Kc2n6.js";import{B as J}from"./index-BfLqMeh1.js";import{S as _,a as v,b,c as f,d as m}from"./select-DQWo19SH.js";import"./index-3IjU4tvV.js";import"./x-BFjxWGC8.js";import"./index-mSzaAGnr.js";import"./createLucideIcon-D3PaGiha.js";import"./iconBase-Clcf0kio.js";import"./index-CGOONips.js";import"./index-DxlHtgId.js";import"./index-hhJ96dlf.js";import"./chevron-down-DDJCOgeU.js";import"./check-CvLcGTD2.js";const se=({honor_ujian:u})=>{const[d,p]=x.useState(!1),{semesters:N}=w().props,{put:S,data:n,setData:r,processing:y,errors:i,reset:T}=P({semester_id:"",nama:"",tanggal:"",tugas:[{jenis_tugas:"",jumlah:"",honor_per_tugas:"",honor_total:""}]});x.useEffect(()=>{d&&(r("semester_id",u.semester.id.toString()),r("nama",u.nama),r("tanggal",u.tanggal.toString()),r("tugas",u.tugas.map(a=>({jenis_tugas:a.jenis_tugas,jumlah:a.jumlah,honor_per_tugas:a.honor_per_tugas,honor_total:a.honor_total}))))},[d]);const j=a=>{const s=typeof a=="string"?parseInt(a.replace(/[^0-9]/g,"")):a;return isNaN(s)?"Rp. ":new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(s)},C=a=>parseInt(a.replace(/[^0-9]/g,""))||0,h=(a,s,t)=>{const l=[...n.tugas];s==="honor_per_tugas"?l[a][s]=C(t):s==="jumlah"?l[a][s]=parseInt(t):l[a][s]=t,r("tugas",l)},D=()=>{r("tugas",[...n.tugas,{jenis_tugas:"",jumlah:"",honor_per_tugas:"",honor_total:""}])},I=a=>{const s=n.tugas.filter((t,l)=>l!==a);r("tugas",s)},k=a=>{a.preventDefault(),S(route("admin.bendahara.honor-ujian.uas.update",u.id),{onSuccess:()=>{p(!1),T()}})};return e.jsxs(E,{open:d,onOpenChange:p,children:[e.jsx(R,{asChild:!0,children:e.jsx(g,{variant:"blue",children:e.jsx(J,{})})}),e.jsxs(B,{className:"max-h-[90vh] overflow-y-auto",children:[e.jsxs(H,{children:[e.jsx(F,{children:"Edit Honorarium"}),e.jsx(V,{children:"Silahkan ubah data yang sesuai"})]}),e.jsxs("form",{onSubmit:k,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(o,{children:"Nama"}),e.jsx(c,{value:n.nama,onChange:a=>r("nama",a.target.value)}),i.nama&&e.jsx("p",{className:"text-red-500",children:i.nama})]}),e.jsxs("div",{children:[e.jsx(o,{children:"Semester"}),e.jsxs(_,{value:n.semester_id,onValueChange:a=>r("semester_id",a),children:[e.jsx(v,{className:"w-full",children:e.jsx(b,{placeholder:"Pilih Semester"})}),e.jsx(f,{children:N.map(a=>e.jsxs(m,{value:String(a.id),children:[a.semester," ",a.tahun_ajaran]},a.id))})]}),i.semester_id&&e.jsx("p",{className:"text-red-600",children:i.semester_id})]}),e.jsxs("div",{children:[e.jsx(o,{children:"Tanggal"}),e.jsx(c,{type:"date",value:n.tanggal,onChange:a=>r("tanggal",a.target.value)}),i.tanggal&&e.jsx("p",{className:"text-red-500",children:i.tanggal})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-bold text-lg",children:"Tugas"}),n.tugas.map((a,s)=>e.jsxs("div",{className:"border p-4 rounded space-y-2",children:[e.jsxs("div",{children:[e.jsx(o,{children:"Jenis Tugas"}),e.jsxs(_,{value:a.jenis_tugas,onValueChange:t=>h(s,"jenis_tugas",t),children:[e.jsx(v,{className:"w-full",children:e.jsx(b,{placeholder:"Pilih Tugas"})}),e.jsxs(f,{children:[e.jsx(m,{value:"pembuat soal",children:"Pembuat Soal"}),e.jsx(m,{value:"korektor",children:"Korektor"}),e.jsx(m,{value:"pengawas",children:"Pengawas"}),e.jsx(m,{value:"panitia",children:"Panitia"})]})]})]}),(a.jenis_tugas==="pembuat soal"||a.jenis_tugas==="korektor"||a.jenis_tugas==="pengawas")&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(o,{children:"Jumlah"}),e.jsx(c,{type:"number",value:isNaN(Number(a.jumlah))?"":a.jumlah,onChange:t=>h(s,"jumlah",t.target.value)})]}),e.jsx(c,{type:"text",value:j(a.honor_per_tugas),onChange:t=>h(s,"honor_per_tugas",t.target.value)})]}),a.jenis_tugas==="panitia"&&e.jsxs("div",{children:[e.jsx(o,{children:"Honor"}),e.jsx(c,{type:"text",value:j(a.honor_per_tugas),onChange:t=>h(s,"honor_per_tugas",t.target.value)})]}),e.jsx(g,{type:"button",variant:"destructive",onClick:()=>I(s),children:"Hapus Tugas"})]},s)),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(g,{type:"button",onClick:D,children:"Tambah Tugas"}),e.jsx(g,{variant:"blue",type:"submit",disabled:y,children:"Simpan"})]})]})]})]})]})};export{se as default};
