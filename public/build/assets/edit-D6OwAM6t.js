import{r as x,X as w,G as E,j as e}from"./app-BNTFzJjt.js";import{B as h}from"./button-DC3RdRc6.js";import{D as H,a as R,b as B,c as k,d as F,e as V}from"./dialog-COx421Eb.js";import{I as c}from"./input-BxkRFBxM.js";import{L as i}from"./label-B9FUpiDI.js";import{B as J}from"./index-BC7b9wZa.js";import{S as _,a as v,b,c as f,d as m}from"./select-DMX6QXuM.js";import"./index-BSLpNY0K.js";import"./x-B31Bn3Ch.js";import"./index-Bh1xpr-G.js";import"./createLucideIcon-57-wsYf5.js";import"./iconBase-DSShVqVP.js";import"./index-DPgBTQfT.js";import"./index-BhxNwGHF.js";import"./index-BTW216fJ.js";import"./chevron-down-BUHO6H_m.js";import"./check-56Gy-Ton.js";const se=({honor_skripsi:u})=>{const[d,p]=x.useState(!1),{semesters:S}=w().props,{put:y,data:n,setData:r,processing:T,errors:l,reset:N}=E({semester_id:"",nama:"",tanggal:"",tugas:[{jenis_tugas:"",jumlah:"",honor_per_tugas:"",honor_total:""}]});x.useEffect(()=>{d&&(r("semester_id",u.semester.id.toString()),r("nama",u.nama),r("tanggal",u.tanggal.toString()),r("tugas",u.tugas.map(a=>({jenis_tugas:a.jenis_tugas,jumlah:a.jumlah,honor_per_tugas:a.honor_per_tugas,honor_total:a.honor_total}))))},[d]);const j=a=>{const s=typeof a=="string"?parseInt(a.replace(/[^0-9]/g,"")):a;return isNaN(s)?"Rp. ":new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(s)},C=a=>parseInt(a.replace(/[^0-9]/g,""))||0,g=(a,s,t)=>{const o=[...n.tugas];s==="honor_per_tugas"?o[a][s]=C(t):s==="jumlah"?o[a][s]=parseInt(t):o[a][s]=t,r("tugas",o)},D=()=>{r("tugas",[...n.tugas,{jenis_tugas:"",jumlah:"",honor_per_tugas:"",honor_total:""}])},I=a=>{const s=n.tugas.filter((t,o)=>o!==a);r("tugas",s)},P=a=>{a.preventDefault(),y(route("admin.bendahara.honor-skripsi.update",u.id),{onSuccess:()=>{p(!1),N()}})};return e.jsxs(H,{open:d,onOpenChange:p,children:[e.jsx(R,{asChild:!0,children:e.jsx(h,{variant:"blue",children:e.jsx(J,{})})}),e.jsxs(B,{className:"max-h-[90vh] overflow-y-auto",children:[e.jsxs(k,{children:[e.jsx(F,{children:"Edit Honorarium"}),e.jsx(V,{children:"Silahkan ubah data yang sesuai"})]}),e.jsxs("form",{onSubmit:P,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(i,{children:"Nama"}),e.jsx(c,{value:n.nama,onChange:a=>r("nama",a.target.value)}),l.nama&&e.jsx("p",{className:"text-red-500",children:l.nama})]}),e.jsxs("div",{children:[e.jsx(i,{children:"Semester"}),e.jsxs(_,{value:n.semester_id,onValueChange:a=>r("semester_id",a),children:[e.jsx(v,{className:"w-full",children:e.jsx(b,{placeholder:"Pilih Semester"})}),e.jsx(f,{children:S.map(a=>e.jsxs(m,{value:String(a.id),children:[a.semester," ",a.tahun_ajaran]},a.id))})]}),l.semester_id&&e.jsx("p",{className:"text-red-600",children:l.semester_id})]}),e.jsxs("div",{children:[e.jsx(i,{children:"Tanggal"}),e.jsx(c,{type:"date",value:n.tanggal,onChange:a=>r("tanggal",a.target.value)}),l.tanggal&&e.jsx("p",{className:"text-red-500",children:l.tanggal})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-bold text-lg",children:"Tugas"}),n.tugas.map((a,s)=>e.jsxs("div",{className:"border p-4 rounded space-y-2",children:[e.jsxs("div",{children:[e.jsx(i,{children:"Jenis Tugas"}),e.jsxs(_,{value:a.jenis_tugas,onValueChange:t=>g(s,"jenis_tugas",t),children:[e.jsx(v,{className:"w-full",children:e.jsx(b,{placeholder:"Pilih Tugas"})}),e.jsxs(f,{children:[e.jsx(m,{value:"penguji",children:"Penguji"}),e.jsx(m,{value:"pembimbing",children:"Pembimbing"}),e.jsx(m,{value:"panitia",children:"Panitia"}),e.jsx(m,{value:"sekretaris",children:"Sekretaris"})]})]})]}),(a.jenis_tugas==="penguji"||a.jenis_tugas==="pembimbing")&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(i,{children:"Jumlah"}),e.jsx(c,{type:"number",value:a.jumlah,onChange:t=>g(s,"jumlah",t.target.value)})]}),e.jsxs("div",{children:[e.jsx(i,{children:"Honor per Tugas"}),e.jsx(c,{type:"text",value:j(a.honor_per_tugas),onChange:t=>g(s,"honor_per_tugas",t.target.value)})]})]}),(a.jenis_tugas==="panitia"||a.jenis_tugas==="sekretaris")&&e.jsxs("div",{children:[e.jsx(i,{children:"Honor"}),e.jsx(c,{type:"text",value:j(a.honor_per_tugas),onChange:t=>g(s,"honor_per_tugas",t.target.value)})]}),e.jsx(h,{type:"button",variant:"destructive",onClick:()=>I(s),children:"Hapus Tugas"})]},s)),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(h,{type:"button",onClick:D,children:"Tambah Tugas"}),e.jsx(h,{variant:"blue",type:"submit",disabled:T,children:"Simpan"})]})]})]})]})]})};export{se as default};
