import{r as S,R as H,X as p,G as V,j as e,S as K}from"./app-CnAtmw2r.js";import{T as B}from"./TestLayout-D3yt0knW.js";import{column as O}from"./column-ZQcVtoBg.js";import{D as E}from"./DataTable-D_nIXlVX.js";import{I as c}from"./input-BsuoZ_Ni.js";import{L as o}from"./label-DnqO1_1c.js";import{B as d}from"./button-BWdGOnz1.js";import{D as J,a as G,b as M,c as X,d as q,e as z}from"./dialog-Favw0_tG.js";import{S as j,a as g,b as x,c as b,d as u}from"./select-CWKBNOYY.js";import{C as A,a as Q}from"./card-D0W3rlJn.js";import{S as U}from"./sweetalert2.esm.all-9Qm2jZ7z.js";import{D as y}from"./download-abos4bBg.js";import"./index-DP8fRuxM.js";import"./index-B-Vsim4p.js";import"./index-BE3ABL--.js";import"./index-dXF4f3YF.js";import"./x-Bt684uya.js";import"./createLucideIcon-DscpJ9mQ.js";import"./index-QiDkJO17.js";import"./index-OkgT5qAp.js";import"./chevron-right-tB6hC5F7.js";import"./check-C-EOj9JY.js";import"./chevrons-up-down-Ex-OpgSe.js";import"./logo stai-DC2AgwFL.js";import"./format-rupiah.esm-Dv-bfkK6.js";import"./edit-DPFXjxYF.js";import"./index-C4tgHcK7.js";import"./iconBase-BOevRcBT.js";import"./chevron-down-B2cITflA.js";import"./delete-DH83hCFW.js";import"./index-D9fSCyXh.js";import"./table-B2l_CJup.js";import"./search-BTFPyprU.js";const Le=({honor_ppl:f})=>{const[D,_]=S.useState(!1),[W,Y]=H.useState(),{jenis_pembayaran:Z}=p().props,{mahasiswa:$}=p().props,{semesters:v}=p().props,{data:r,setData:n,post:C,processing:T,errors:l,reset:w}=V({semester_id:"",nama:"",tanggal:"",tugas:[{jenis_tugas:"",jumlah:"",honor_per_tugas:"",honor_total:""}]}),N=a=>{const s=typeof a=="string"?parseInt(a.replace(/[^0-9]/g,"")):a;return isNaN(s)?"Rp. ":new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(s)},k=a=>parseInt(a.replace(/[^0-9]/g,""))||0,h=(a,s,t)=>{const i=[...r.tugas];s==="honor_per_tugas"?i[a][s]=k(t):s==="jumlah"?i[a][s]=parseInt(t):i[a][s]=t,n("tugas",i)},I=()=>{n("tugas",[...r.tugas,{jenis_tugas:"",jumlah:"",honor_per_tugas:"",honor_total:""}])},P=a=>{const s=r.tugas.filter((t,i)=>i!==a);n("tugas",s)},R=a=>{a.preventDefault(),C(route("admin.bendahara.honor-ppl.store"),{onSuccess:()=>{_(!1),w(),n({semester_id:"",nama:"",tanggal:"",tugas:[{jenis_tugas:"",jumlah:"",honor_per_tugas:"",honor_total:""}]})}})},[m,L]=S.useState("all"),F=m==="all"?f:f.filter(a=>a.semester.id.toString()===m);return e.jsxs(B,{children:[e.jsx(K,{title:"Honor PPL/KKN"}),e.jsx("div",{className:"md:max-w-full max-w-[350px]",children:e.jsx(A,{className:"w-full bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-100 shadow-md",children:e.jsxs(Q,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"space-y-2",children:e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Honorarium PPL/KKN"})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(d,{variant:"default",onClick:()=>{if(m==="all"){U.fire({icon:"warning",title:"Oops...",text:"Silakan pilih semester tertentu untuk mencetak laporan.",confirmButtonColor:"#3085d6"});return}const a=route("admin.bendahara.honor-ppl.laporan",{semester:m});window.open(a,"_blank")},children:[e.jsx(y,{className:"mr-2"})," Laporan PDF"]}),e.jsxs(j,{value:m,onValueChange:a=>L(a),children:[e.jsx(g,{className:"w-full md:w-[200px]",children:e.jsx(x,{placeholder:"Pilih Semester"})}),e.jsxs(b,{children:[e.jsx(u,{value:"all",children:"Semua Semester"}),v.map((a,s)=>e.jsxs(u,{value:a.id.toString(),children:[a.semester," ",a.tahun_ajaran]},s))]})]}),e.jsxs(J,{open:D,onOpenChange:_,children:[e.jsx(G,{asChild:!0,children:e.jsxs(d,{variant:"blue",children:[e.jsx(y,{className:"mr-2"}),"Tambah Data"]})}),e.jsxs(M,{className:"max-h-[90vh] overflow-y-auto",children:[e.jsxs(X,{children:[e.jsx(q,{children:"Tambah Data"}),e.jsx(z,{children:"Silahkan Masukkan Data yang sesuai"})]}),e.jsxs("form",{onSubmit:R,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(o,{children:"Nama"}),e.jsx(c,{value:r.nama,onChange:a=>n("nama",a.target.value)}),l.nama&&e.jsx("p",{className:"text-red-500",children:l.nama})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(o,{htmlFor:"semester_id",children:"Semester"}),e.jsxs(j,{value:r.semester_id,onValueChange:a=>n("semester_id",a),children:[e.jsx(g,{className:"w-full",children:e.jsx(x,{placeholder:"Pilih Semester"})}),e.jsx(b,{children:v.map((a,s)=>e.jsxs(u,{value:a.id.toString(),children:[a.semester," ",a.tahun_ajaran]},s))})]}),l.semester_id&&e.jsx("p",{className:"text-red-600",children:l.semester_id})]}),e.jsxs("div",{children:[e.jsx(o,{children:"Tanggal"}),e.jsx(c,{type:"date",value:r.tanggal,onChange:a=>n("tanggal",a.target.value)}),l.tanggal&&e.jsx("p",{className:"text-red-500",children:l.tanggal})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-bold text-lg",children:"Tugas"}),r.tugas.map((a,s)=>e.jsxs("div",{className:"border p-4 rounded space-y-2",children:[e.jsxs("div",{children:[e.jsx(o,{children:"Jenis Tugas"}),e.jsxs(j,{value:a.jenis_tugas,onValueChange:t=>h(s,"jenis_tugas",t),children:[e.jsx(g,{className:"w-full",children:e.jsx(x,{placeholder:"Pilih Tugas"})}),e.jsxs(b,{children:[e.jsx(u,{value:"pembimbing",children:"Pembimbing"}),e.jsx(u,{value:"panitia",children:"Pantia"})]})]})]}),a.jenis_tugas==="pembimbing"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(o,{children:"Jumlah"}),e.jsx(c,{type:"number",value:isNaN(Number(a.jumlah))?"":a.jumlah,onChange:t=>h(s,"jumlah",t.target.value)})]}),e.jsx(c,{type:"text",value:N(a.honor_per_tugas),onChange:t=>h(s,"honor_per_tugas",t.target.value)})]}),a.jenis_tugas==="panitia"&&e.jsxs("div",{children:[e.jsx(o,{children:"Honor"}),e.jsx(c,{type:"text",value:N(a.honor_per_tugas),onChange:t=>h(s,"honor_per_tugas",t.target.value)})]}),e.jsx(d,{type:"button",variant:"destructive",onClick:()=>P(s),children:"Hapus Tugas"})]},s)),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(d,{type:"button",onClick:I,children:"Tambah Tugas"}),e.jsx(d,{variant:"blue",type:"submit",disabled:T,children:"Simpan"})]})]})]})]})]})]})]}),e.jsx("hr",{className:"border-t-2 border-gray-400"})]})})}),e.jsx(E,{data:F,columns:O})]})};export{Le as default};
