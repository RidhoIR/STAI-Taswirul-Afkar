import{r as x,X as P,G as w,j as e}from"./app-Cq20QrRz.js";import{B as h}from"./button-DrnRyrw2.js";import{D as E,a as R,b as B,c as H,d as F,e as V}from"./dialog-xZ33bj-4.js";import{I as c}from"./input-C5rDHr5D.js";import{L as i}from"./label-TukXHBQr.js";import{B as J}from"./index-hzt2OZIt.js";import{S as _,a as v,b,c as f,d as g}from"./select-BWswDKmn.js";import"./index-BPyi8Oh_.js";import"./x-upm_IIYa.js";import"./index-D5c50GQy.js";import"./createLucideIcon-BzBnNE0M.js";import"./iconBase-MPGX34T6.js";import"./index-TdP1Xolx.js";import"./index-l3wdiPOb.js";import"./index-C9hU1MwT.js";import"./chevron-down-BdJOh192.js";import"./check-BPv1hbry.js";const se=({honor_ppl:u})=>{const[d,j]=x.useState(!1),{semesters:S}=P().props,{put:y,data:n,setData:r,processing:T,errors:l,reset:N}=w({semester_id:"",nama:"",tanggal:"",tugas:[{jenis_tugas:"",jumlah:"",honor_per_tugas:"",honor_total:""}]});x.useEffect(()=>{d&&(r("semester_id",u.semester.id.toString()),r("nama",u.nama),r("tanggal",u.tanggal.toString()),r("tugas",u.tugas.map(a=>({jenis_tugas:a.jenis_tugas,jumlah:a.jumlah,honor_per_tugas:a.honor_per_tugas,honor_total:a.honor_total}))))},[d]);const p=a=>{const s=typeof a=="string"?parseInt(a.replace(/[^0-9]/g,"")):a;return isNaN(s)?"Rp. ":new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(s)},C=a=>parseInt(a.replace(/[^0-9]/g,""))||0,m=(a,s,t)=>{const o=[...n.tugas];s==="honor_per_tugas"?o[a][s]=C(t):s==="jumlah"?o[a][s]=parseInt(t):o[a][s]=t,r("tugas",o)},D=()=>{r("tugas",[...n.tugas,{jenis_tugas:"",jumlah:"",honor_per_tugas:"",honor_total:""}])},I=a=>{const s=n.tugas.filter((t,o)=>o!==a);r("tugas",s)},k=a=>{a.preventDefault(),y(route("admin.bendahara.honor-ppl.update",u.id),{onSuccess:()=>{j(!1),N()}})};return e.jsxs(E,{open:d,onOpenChange:j,children:[e.jsx(R,{asChild:!0,children:e.jsx(h,{variant:"blue",children:e.jsx(J,{})})}),e.jsxs(B,{className:"max-h-[90vh] overflow-y-auto",children:[e.jsxs(H,{children:[e.jsx(F,{children:"Edit Data"}),e.jsx(V,{children:"Silahkan ubah data yang sesuai"})]}),e.jsxs("form",{onSubmit:k,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(i,{children:"Nama"}),e.jsx(c,{value:n.nama,onChange:a=>r("nama",a.target.value)}),l.nama&&e.jsx("p",{className:"text-red-500",children:l.nama})]}),e.jsxs("div",{children:[e.jsx(i,{children:"Semester"}),e.jsxs(_,{value:n.semester_id,onValueChange:a=>r("semester_id",a),children:[e.jsx(v,{className:"w-full",children:e.jsx(b,{placeholder:"Pilih Semester"})}),e.jsx(f,{children:S.map(a=>e.jsxs(g,{value:String(a.id),children:[a.semester," ",a.tahun_ajaran]},a.id))})]}),l.semester_id&&e.jsx("p",{className:"text-red-600",children:l.semester_id})]}),e.jsxs("div",{children:[e.jsx(i,{children:"Tanggal"}),e.jsx(c,{type:"date",value:n.tanggal,onChange:a=>r("tanggal",a.target.value)}),l.tanggal&&e.jsx("p",{className:"text-red-500",children:l.tanggal})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-bold text-lg",children:"Tugas"}),n.tugas.map((a,s)=>e.jsxs("div",{className:"border p-4 rounded space-y-2",children:[e.jsxs("div",{children:[e.jsx(i,{children:"Jenis Tugas"}),e.jsxs(_,{value:a.jenis_tugas,onValueChange:t=>m(s,"jenis_tugas",t),children:[e.jsx(v,{className:"w-full",children:e.jsx(b,{placeholder:"Pilih Tugas"})}),e.jsxs(f,{children:[e.jsx(g,{value:"penguji",children:"Penguji"}),e.jsx(g,{value:"pembimbing",children:"Pembimbing"}),e.jsx(g,{value:"panitia",children:"Panitia"}),e.jsx(g,{value:"sekretaris",children:"Sekretaris"})]})]})]}),(a.jenis_tugas==="penguji"||a.jenis_tugas==="pembimbing")&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(i,{children:"Jumlah"}),e.jsx(c,{type:"number",value:a.jumlah,onChange:t=>m(s,"jumlah",t.target.value)})]}),e.jsxs("div",{children:[e.jsx(i,{children:"Honor per Tugas"}),e.jsx(c,{type:"text",value:p(a.honor_per_tugas),onChange:t=>m(s,"honor_per_tugas",t.target.value)})]})]}),(a.jenis_tugas==="panitia"||a.jenis_tugas==="sekretaris")&&e.jsxs("div",{children:[e.jsx(i,{children:"Honor"}),e.jsx(c,{type:"text",value:p(a.honor_per_tugas),onChange:t=>m(s,"honor_per_tugas",t.target.value)})]}),e.jsx(h,{type:"button",variant:"destructive",onClick:()=>I(s),children:"Hapus Tugas"})]},s)),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(h,{type:"button",onClick:D,children:"Tambah Tugas"}),e.jsx(h,{variant:"blue",type:"submit",disabled:T,children:"Simpan"})]})]})]})]})]})};export{se as default};
