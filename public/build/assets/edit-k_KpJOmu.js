import{r as h,j as a,G as P}from"./app-C45odvsW.js";import{B as m}from"./button-BcOaYvYF.js";import{D as T,a as A,b as F,c as R,d as B,e as E,f as I}from"./dialog-9aZ8i5N5.js";import{B as O}from"./index-DaE-GMBj.js";import{S as x,a as _,b as f,c as v,d as o}from"./select-fkEaZ90I.js";import{c as b,f as V}from"./index-HOwh0Hi1.js";import{C as q}from"./calendar-C0DOGQUA.js";import{P as H,a as J,b as L}from"./popover-B0EHPlDn.js";import{L as u}from"./label-DI35v_F7.js";import{I as M}from"./input-DPy3L6uB.js";import{C as $}from"./calendar-GHoLnqix.js";import"./x-C2Zn9AI2.js";import"./index-B2P6MX9l.js";import"./createLucideIcon-B1s5H1ba.js";import"./iconBase-BUzxELbk.js";import"./index-BRIxwFix.js";import"./index-l5BC_smi.js";import"./index-BXcIe4D2.js";import"./chevron-down-u5Bbf1gF.js";import"./check-DYTGHN_k.js";import"./chevron-right-ClLPopkT.js";import"./chevron-left-CCUoie9z.js";import"./index-CoG2NX11.js";const S=h.forwardRef(({className:s,...d},c)=>a.jsx("textarea",{className:b("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:c,...d}));S.displayName="Textarea";const ha=({anggaran:s})=>{const[d,c]=h.useState(!1),{put:D,data:t,setData:r,processing:C,errors:n}=P({status_anggaran:s.status_anggaran,keterangan:s.keterangan,jumlah_anggaran_disetujui:s.jumlah_anggaran_disetujui,tgl_pencairan:s.tgl_pencairan,status_pencairan:s.status_pencairan}),N=e=>{if(!e)return"Rp. ";const i=e.replace(/[^,\d]/g,"").toString().split(","),g=i[0].length%3;let p=i[0].substr(0,g);const j=i[0].substr(g).match(/\d{3}/gi);return j&&(p+=(g?".":"")+j.join(".")),p?`Rp. ${p}`:"Rp. "};h.useEffect(()=>{r({status_anggaran:s.status_anggaran,keterangan:s.keterangan,jumlah_anggaran_disetujui:s.jumlah_anggaran_disetujui,tgl_pencairan:s.tgl_pencairan,status_pencairan:s.status_pencairan})},[s]);const y=(e,l)=>{if(l){const i=new Date(l);i.setHours(12,0,0,0),r({...t,[e]:i.toISOString().split("T")[0]})}else r({...t,[e]:""})},k=e=>{const l=e.target.value.replace(/\D/g,"");r("jumlah_anggaran_disetujui",l)},w=e=>{e.preventDefault(),D(route("admin.anggaran.update",s.id),{onSuccess:()=>c(!1)})};return a.jsx("div",{children:a.jsxs(T,{open:d,onOpenChange:c,children:[a.jsx(A,{asChild:!0,children:a.jsx(m,{variant:"blue",children:a.jsx(O,{})})}),a.jsxs(F,{children:[a.jsxs(R,{children:[a.jsx(B,{children:"Edit Anggaran"}),a.jsx(E,{children:"Ubah informasi perihal dan file anggaran."})]}),a.jsx("form",{onSubmit:w,children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx(u,{htmlFor:"status_anggaran",children:"Status Anggaran"}),a.jsxs(x,{value:t.status_anggaran,onValueChange:e=>r("status_anggaran",e),children:[a.jsx(_,{className:"w-full",children:a.jsx(f,{placeholder:"Pilih Status Anggaran"})}),a.jsxs(v,{children:[a.jsx(o,{value:"pending",children:"Pending"}),a.jsx(o,{value:"disetujui",children:"Disetujui"}),a.jsx(o,{value:"ditolak",children:"Ditolak"})]})]}),n.status_anggaran&&a.jsx("p",{className:"text-red-600",children:n.status_anggaran})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx(u,{htmlFor:"status_pencairan",children:"Status Pencairan"}),a.jsxs(x,{value:t.status_pencairan,onValueChange:e=>r("status_pencairan",e),children:[a.jsx(_,{className:"w-full",children:a.jsx(f,{placeholder:"Pilih Status Anggaran"})}),a.jsxs(v,{children:[a.jsx(o,{value:"belum",children:"Belum"}),a.jsx(o,{value:"sudah",children:"Sudah"})]})]}),n.status_pencairan&&a.jsx("p",{className:"text-red-600",children:n.status_pencairan})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx(u,{htmlFor:"jumlah_anggaran_disetujui",children:"Jumlah Anggaran Disetujui"}),a.jsx(M,{id:"jumlah_anggaran_disetujui",type:"text",value:N(t.jumlah_anggaran_disetujui),onChange:k,required:!0}),n.jumlah_anggaran_disetujui&&a.jsx("p",{className:"text-red-500",children:n.jumlah_anggaran_disetujui})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx(u,{htmlFor:"tgl_pencairan",children:"Tanggal Pencairan"}),a.jsxs(H,{modal:!0,children:[a.jsx(J,{asChild:!0,children:a.jsxs(m,{variant:"outline",className:b("w-full justify-start text-left font-normal",!t.tgl_pencairan&&"text-muted-foreground"),children:[t.tgl_pencairan?V(new Date(t.tgl_pencairan),"yyyy-MM-dd"):"Pilih Tanggal",a.jsx($,{className:"ml-auto h-4 w-4 opacity-50"})]})}),a.jsx(L,{className:"w-auto p-0",children:a.jsx(q,{mode:"single",selected:t.tgl_pencairan?new Date(t.tgl_pencairan):void 0,onSelect:e=>y("tgl_pencairan",e)})})]})]}),a.jsxs("div",{children:[a.jsx(u,{htmlFor:"keterangan",children:"Keterangan"}),a.jsx(S,{id:"keterangan",value:t.keterangan,onChange:e=>r("keterangan",e.target.value)}),n.keterangan&&a.jsx("p",{className:"text-red-600",children:n.keterangan})]}),a.jsx(I,{children:a.jsx(m,{type:"submit",disabled:C,children:"Save Changes"})})]})})]})]})})};export{ha as default};
