import{r as j,R as P,X as u,G as B,j as a,S as H}from"./app-CokYzS-F.js";import{T as E}from"./TestLayout-DUv21DNp.js";import{column as O}from"./column-jWE0xLU5.js";import{D as V}from"./DataTable-cPR4PY8E.js";import{I as f}from"./input-dHjaHlmq.js";import{L as h}from"./label-C_d9L4tp.js";import{B as n}from"./button-DXRGjYHm.js";import{D as q,a as A,b as W,c as Y,d as G,e as J,f as M}from"./dialog-DbdAoKxt.js";import{S as b,a as S,b as D,c as v,d as x}from"./select-Boj3KMCS.js";import{C as X,a as $}from"./card-BKijC6qD.js";import{S as z}from"./sweetalert2.esm.all-9Qm2jZ7z.js";import{D as N}from"./download-C7WzBBRN.js";import"./index-oHIwYT2J.js";import"./index-BR9r-2lB.js";import"./index-C8yMlqDe.js";import"./index-BLrSBiW6.js";import"./x-aa3kbx0y.js";import"./createLucideIcon-BkUXKyvH.js";import"./index-Dty0-HSw.js";import"./index-CsPfr4gY.js";import"./chevron-right-wTp0rLbP.js";import"./check-zEuZ_6mu.js";import"./chevrons-up-down-Qy9nBHWm.js";import"./logo stai-DC2AgwFL.js";import"./format-rupiah.esm-Dv-bfkK6.js";import"./edit-DBLfx_l7.js";import"./index-DwmjUXIJ.js";import"./iconBase-eNTNXRGJ.js";import"./chevron-down-BUAYtc6z.js";import"./delete-BNl3uoW3.js";import"./index-DhHYisH_.js";import"./arrow-up-down-D1flvOEB.js";import"./table-9aRnLclR.js";import"./search-Bl9aP4hy.js";const Ha=({honor_wisuda:o})=>{const[w,l]=j.useState(!1),[K,Q]=P.useState(),{jenis_pembayaran:U}=u().props,{mahasiswa:Z}=u().props,{semesters:aa}=u().props,{data:i,setData:m,post:C,processing:T,errors:t,reset:_}=B({nama:"",tugas:"",honor_per_tugas:""}),y=e=>{e.preventDefault(),C(route("admin.bendahara.honor-wisuda.store"),{onSuccess:()=>{l(!1),_(),console.log("Pembayaran berhasil")},onError:s=>{console.log(s)}})},k=e=>{const c=e.replace(/[^,\d]/g,"").toString().split(","),d=c[0].length%3;let p=c[0].substr(0,d);const g=c[0].substr(d).match(/\d{3}/gi);return g&&(p+=(d?".":"")+g.join(".")),p?`Rp. ${p}`:"Rp. "},F=e=>{const s=e.target.value.replace(/\D/g,"");m("honor_per_tugas",s)},[r,I]=j.useState("all"),R=Array.from(new Set(o.map(e=>new Date(e.tanggal).getFullYear().toString()))).sort((e,s)=>parseInt(s)-parseInt(e)),L=r==="all"?o:o.filter(e=>new Date(e.tanggal).getFullYear().toString()===r);return a.jsxs(E,{children:[a.jsx(H,{title:"Honor Wisuda"}),a.jsx("div",{className:"md:max-w-full max-w-[350px]",children:a.jsx(X,{className:"w-full bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-100 shadow-md",children:a.jsxs($,{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("div",{className:"space-y-2",children:a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Honorarium Wisuda"})}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(n,{variant:"default",onClick:()=>{if(r==="all"){z.fire({icon:"warning",title:"Oops...",text:"Silakan pilih tahun tertentu untuk mencetak laporan.",confirmButtonColor:"#3085d6"});return}const e=route("admin.bendahara.honor-wisuda.laporan",{tahun:r});window.open(e,"_blank")},children:[a.jsx(N,{className:"mr-2"})," Laporan PDF"]}),a.jsxs(b,{value:r,onValueChange:e=>I(e),children:[a.jsx(S,{className:"w-full md:w-[200px]",children:a.jsx(D,{placeholder:"Pilih Tahun"})}),a.jsxs(v,{children:[a.jsx(x,{value:"all",children:"Semua Tahun"}),R.map((e,s)=>a.jsx(x,{value:e,children:e},s))]})]}),a.jsxs(q,{open:w,onOpenChange:l,children:[a.jsx(A,{asChild:!0,children:a.jsxs(n,{variant:"blue",children:[a.jsx(N,{className:"mr-2"}),"Tambah Data"]})}),a.jsxs(W,{children:[a.jsxs(Y,{children:[a.jsx(G,{children:"Tambah Data"}),a.jsx(J,{children:"Silahkan Masukkan Data yang sesuai"})]}),a.jsxs("form",{onSubmit:y,children:[a.jsxs("div",{className:"mb-4",children:[a.jsxs(h,{htmlFor:"nama",children:["Nama",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx(f,{id:"nama",type:"text",value:i.nama,onChange:e=>m("nama",e.target.value),required:!0}),t.nama&&a.jsx("p",{className:"text-red-500",children:t.nama})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx(h,{children:"Tugas"}),a.jsxs(b,{value:i.tugas,onValueChange:e=>m("tugas",e),children:[a.jsx(S,{className:"w-full",children:a.jsx(D,{placeholder:"Pilih Tugas"})}),a.jsx(v,{children:a.jsx(x,{value:"panitia",children:"Panitia"})})]})]}),a.jsxs("div",{className:"mb-4",children:[a.jsxs(h,{htmlFor:"honor_per_tugas",children:["Honor",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx(f,{id:"honor_per_tugas",type:"text",value:k(i.honor_per_tugas),onChange:F,required:!0}),t.honor_per_tugas&&a.jsx("p",{className:"text-red-500",children:t.honor_per_tugas})]}),a.jsxs(M,{children:[a.jsx(n,{type:"submit",disabled:T,children:"Ajukan"}),a.jsx(n,{variant:"outline",onClick:()=>l(!1),children:"Batal"})]})]})]})]})]})]}),a.jsx("hr",{className:"border-t-2 border-gray-400"})]})})}),a.jsx(V,{data:L,columns:O})]})};export{Ha as default};
