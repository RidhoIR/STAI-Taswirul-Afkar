import{j as e,r as L,X as v,G as Y,S as $}from"./app-CnAtmw2r.js";import{T as W}from"./TestLayout-D3yt0knW.js";import{D as P}from"./DataTable-D_nIXlVX.js";import{I as m}from"./input-BsuoZ_Ni.js";import{L as h}from"./label-DnqO1_1c.js";import{B as d}from"./button-BWdGOnz1.js";import{column as A}from"./column-CMlBExD8.js";import{D as R,a as B,b as I,c as F,d as q,e as K,f as M}from"./dialog-Favw0_tG.js";import{C as n,a as o,b as z,c as E,d as G}from"./card-D0W3rlJn.js";import{T as Q,a as Z,b as O,c as X}from"./tabs-D0iacNXV.js";import{b as i}from"./index-dXF4f3YF.js";import{R as ee,B as ae,C as se,X as te,Y as le,T as re,L as ie,a as de}from"./BarChart-fCfIbJx8.js";import{C as ne}from"./chevron-left-CwO3o8rS.js";import{C as oe}from"./chevron-right-tB6hC5F7.js";import{D as H}from"./download-abos4bBg.js";import{c as ce}from"./createLucideIcon-DscpJ9mQ.js";import{C as xe}from"./calendar-CPx1iHzX.js";import"./index-DP8fRuxM.js";import"./index-B-Vsim4p.js";import"./index-BE3ABL--.js";import"./x-Bt684uya.js";import"./index-QiDkJO17.js";import"./index-OkgT5qAp.js";import"./check-C-EOj9JY.js";import"./chevrons-up-down-Ex-OpgSe.js";import"./logo stai-DC2AgwFL.js";import"./table-B2l_CJup.js";import"./chevron-down-B2cITflA.js";import"./search-BTFPyprU.js";import"./checkbox-DbkleIVY.js";import"./format-rupiah.esm-Dv-bfkK6.js";import"./delete-BCPZcaTY.js";import"./index-D9fSCyXh.js";import"./iconBase-BOevRcBT.js";import"./arrow-up-down-DCOg2YKB.js";import"./index-PUo77umJ.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w=ce("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);function me({pemasukan:a,pengeluaran:j}){const c=[{name:"Pemasukan",value:a,fill:"#10b981"},{name:"Pengeluaran",value:j,fill:"#f43f5e"}];return e.jsx(ee,{width:"100%",height:350,children:e.jsxs(ae,{data:c,margin:{top:15,right:40,left:40,bottom:5},children:[e.jsx(se,{strokeDasharray:"3 3",vertical:!1}),e.jsx(te,{dataKey:"name",axisLine:!1,tickLine:!1}),e.jsx(le,{tickFormatter:t=>t.toLocaleString("id-ID"),axisLine:!1,tickLine:!1}),e.jsx(re,{formatter:t=>i(Number(t)),labelStyle:{color:"#111",fontWeight:"bold"},contentStyle:{borderRadius:"8px",padding:"10px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)"}}),e.jsx(ie,{wrapperStyle:{paddingTop:"15px"}}),e.jsx(de,{dataKey:"value",name:"Jumlah",radius:[4,4,0,0]})]})})}const ea=({laporans:a})=>{const[j,c]=L.useState(!1),[t,_]=L.useState(0),{jenis_pembayaran:he}=v().props,{mahasiswa:pe}=v().props,{semesters:je}=v().props,s=a&&a.length>0?a[t]:null,{data:x,setData:p,post:J,processing:y,errors:r}=Y({periode_awal:"",periode_akhir:"",saldo_awal:""}),C=l=>{l.preventDefault(),J(route("admin.bendahara.laporan.store"),{onSuccess:()=>{c(!1),console.log("Pembayaran berhasil")},onError:u=>{console.log(u)}})},D=l=>{const N=l.replace(/[^,\d]/g,"").toString().split(","),k=N[0].length%3;let f=N[0].substr(0,k);const T=N[0].substr(k).match(/\d{3}/gi);return T&&(f+=(k?".":"")+T.join(".")),f?`Rp. ${f}`:"Rp. "},S=l=>{const u=l.target.value.replace(/\D/g,"");p("saldo_awal",u)},g=a&&t<a.length-1?a[t+1]:null,b=g&&s?(s.saldo_akhir-g.saldo_akhir)/g.saldo_akhir*100:0,U=()=>{a&&t<a.length-1&&_(t+1)},V=()=>{t>0&&_(t-1)};return e.jsxs(W,{children:[e.jsx($,{title:"Laporan Keuangan"}),e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-slate-100 dark:from-slate-900 dark:to-slate-800",children:[e.jsx("header",{className:"bg-white dark:bg-slate-950 shadow-sm",children:e.jsxs("div",{className:"container mx-auto px-4 py-6",children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-slate-800 dark:text-slate-100",children:"Laporan Keuangan"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1",children:"Pantau keuangan dan analisis data pemasukan dan pengeluaran"})]})}),e.jsxs("main",{className:"container mx-auto px-4 py-8",children:[s&&e.jsxs("div",{className:"mb-6 flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(d,{variant:"outline",size:"icon",onClick:U,disabled:!a||t>=a.length-1,children:e.jsx(ne,{className:"h-4 w-4"})}),e.jsx("div",{className:"mx-4 text-center",children:e.jsxs("h2",{className:"font-medium text-slate-700 dark:text-slate-300",children:[new Date(s.periode_awal).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"})," - ",new Date(s.periode_akhir).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"})]})}),e.jsx(d,{variant:"outline",size:"icon",onClick:V,disabled:t<=0,children:e.jsx(oe,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(R,{open:j,onOpenChange:c,children:[e.jsx(B,{asChild:!0,children:e.jsxs(d,{children:[e.jsx(H,{className:"mr-2"}),"Tambah Data"]})}),e.jsxs(I,{children:[e.jsxs(F,{children:[e.jsx(q,{children:"Tambah Laporan"}),e.jsx(K,{children:"Silahkan Masukkan Data yang sesuai"})]}),e.jsxs("form",{onSubmit:C,children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs(h,{htmlFor:"periode_awal",children:["Periode Awal",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(m,{id:"periode_awal",type:"date",value:x.periode_awal,onChange:l=>p("periode_awal",l.target.value),required:!0}),r.periode_awal&&e.jsx("p",{className:"text-red-500",children:r.periode_awal})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs(h,{htmlFor:"periode_akhir",children:["Periode Akhir",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(m,{id:"periode_akhir",type:"date",value:x.periode_akhir,onChange:l=>p("periode_akhir",l.target.value),required:!0}),r.periode_akhir&&e.jsx("p",{className:"text-red-500",children:r.periode_akhir})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs(h,{htmlFor:"saldo_awal",children:["Saldo Awal",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(m,{id:"saldo_awal",type:"text",value:D(x.saldo_awal),onChange:S,required:!0}),r.saldo_awal&&e.jsx("p",{className:"text-red-500",children:r.saldo_awal})]}),e.jsxs(M,{children:[e.jsx(d,{type:"submit",disabled:y,children:"Simpan"}),e.jsx(d,{variant:"outline",onClick:()=>c(!1),children:"Batal"})]})]})]})]})})]}),s&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[e.jsx(n,{className:"bg-white dark:bg-slate-800",children:e.jsx(o,{className:"p-6",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:"Total Pemasukan"}),e.jsx("h3",{className:"text-2xl font-bold text-emerald-600 dark:text-emerald-400 mt-1",children:i(s.total_pemasukan)})]}),e.jsx("div",{className:"bg-emerald-100 dark:bg-emerald-900/30 p-2 rounded-full",children:e.jsx(w,{className:"w-4 h-4 text-emerald-600 dark:text-emerald-400"})})]})})}),e.jsx(n,{className:"bg-white dark:bg-slate-800",children:e.jsx(o,{className:"p-6",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:"Total Pengeluaran"}),e.jsx("h3",{className:"text-2xl font-bold text-rose-600 dark:text-rose-400 mt-1",children:i(s.total_pengeluaran)})]}),e.jsx("div",{className:"bg-rose-100 dark:bg-rose-900/30 p-2 rounded-full",children:e.jsx(w,{className:"w-4 h-4 text-rose-600 dark:text-rose-400 rotate-180"})})]})})}),e.jsx(n,{className:"bg-white dark:bg-slate-800",children:e.jsx(o,{className:"p-6",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:"Saldo Awal"}),e.jsx("h3",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400 mt-1",children:i(s.saldo_awal)})]}),e.jsx("div",{className:"bg-blue-100 dark:bg-blue-900/30 p-2 rounded-full",children:e.jsx(xe,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"})})]})})}),e.jsx(n,{className:"bg-white dark:bg-slate-800",children:e.jsx(o,{className:"p-6",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:"Saldo Akhir"}),e.jsx("h3",{className:"text-2xl font-bold text-slate-800 dark:text-white mt-1",children:i(s.saldo_akhir)}),e.jsxs("p",{className:`text-xs mt-1 ${b>=0?"text-emerald-600":"text-rose-600"}`,children:[b>=0?"↑":"↓"," ",Math.abs(b).toFixed(1),"% dari periode sebelumnya"]})]}),e.jsx("div",{className:"bg-slate-100 dark:bg-slate-700 p-2 rounded-full",children:e.jsx(w,{className:"w-4 h-4 text-slate-600 dark:text-slate-400"})})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6 mt-8",children:[e.jsx("div",{className:"lg:col-span-8",children:e.jsxs(n,{children:[e.jsxs(z,{children:[e.jsx(E,{children:"Grafik Keuangan"}),e.jsxs(G,{children:["Visualisasi pemasukan dan pengeluaran periode ",new Date(s.periode_awal).toLocaleDateString("id-ID",{month:"long",year:"numeric"})]})]}),e.jsx(o,{children:e.jsx(me,{pemasukan:s.total_pemasukan,pengeluaran:s.total_pengeluaran})})]})}),e.jsx("div",{className:"lg:col-span-4",children:e.jsxs(n,{children:[e.jsxs(z,{children:[e.jsx(E,{children:"Ringkasan Keuangan"}),e.jsx(G,{children:"Detail posisi keuangan saat ini"})]}),e.jsx(o,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Saldo Awal"}),e.jsx("p",{className:"text-2xl font-semibold",children:i(s.saldo_awal)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Total Pemasukan"}),e.jsxs("p",{className:"text-2xl font-semibold text-emerald-600 dark:text-emerald-400",children:["+",i(s.total_pemasukan)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Total Pengeluaran"}),e.jsxs("p",{className:"text-2xl font-semibold text-rose-600 dark:text-rose-400",children:["-",i(s.total_pengeluaran)]})]}),e.jsxs("div",{className:"pt-4 border-t",children:[e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Saldo Akhir"}),e.jsx("p",{className:"text-2xl font-bold",children:i(s.saldo_akhir)})]})]})})]})})]}),e.jsx("div",{className:"mt-8",children:e.jsxs(Q,{defaultValue:"all",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Daftar Laporan"}),e.jsxs(Z,{children:[e.jsx(O,{value:"all",children:"Semua Periode"}),e.jsx(O,{value:"recent",children:"Terbaru"})]})]}),e.jsx(X,{value:"all",className:"space-y-4",children:e.jsx(n,{children:e.jsx(o,{className:"pt-6",children:a&&a.length>0?e.jsx(P,{data:a,columns:A}):e.jsx("div",{className:"text-center py-10",children:e.jsx("p",{className:"text-slate-500",children:"Belum ada data laporan"})})})})}),e.jsx(X,{value:"recent",className:"space-y-4",children:e.jsx(n,{children:e.jsx(o,{className:"pt-6",children:a&&a.length>0?e.jsx(P,{data:a.slice(0,2),columns:A}):e.jsx("div",{className:"text-center py-10",children:e.jsx("p",{className:"text-slate-500",children:"Belum ada data laporan terbaru"})})})})})]})})]}),(!a||a.length===0)&&e.jsxs("div",{className:"text-center py-20",children:[e.jsx("h3",{className:"text-xl font-medium text-slate-700 dark:text-slate-300",children:"Belum ada data laporan"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Silakan tambahkan laporan keuangan baru"}),e.jsxs(R,{open:j,onOpenChange:c,children:[e.jsx(B,{asChild:!0,children:e.jsxs(d,{children:[e.jsx(H,{className:"mr-2"}),"Tambah Laporan Baru"]})}),e.jsxs(I,{children:[e.jsxs(F,{children:[e.jsx(q,{children:"Tambah Laporan"}),e.jsx(K,{children:"Silahkan Masukkan Data yang sesuai"})]}),e.jsxs("form",{onSubmit:C,children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs(h,{htmlFor:"periode_awal",children:["Periode Awal",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(m,{id:"periode_awal",type:"date",value:x.periode_awal,onChange:l=>p("periode_awal",l.target.value),required:!0}),r.periode_awal&&e.jsx("p",{className:"text-red-500",children:r.periode_awal})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs(h,{htmlFor:"periode_akhir",children:["Periode Akhir",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(m,{id:"periode_akhir",type:"date",value:x.periode_akhir,onChange:l=>p("periode_akhir",l.target.value),required:!0}),r.periode_akhir&&e.jsx("p",{className:"text-red-500",children:r.periode_akhir})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs(h,{htmlFor:"saldo_awal",children:["Saldo Awal",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(m,{id:"saldo_awal",type:"text",value:D(x.saldo_awal),onChange:S,required:!0}),r.saldo_awal&&e.jsx("p",{className:"text-red-500",children:r.saldo_awal})]}),e.jsxs(M,{children:[e.jsx(d,{type:"submit",disabled:y,children:"Simpan"}),e.jsx(d,{variant:"outline",onClick:()=>c(!1),children:"Batal"})]})]})]})]})]})]})]})]})};export{ea as default};
