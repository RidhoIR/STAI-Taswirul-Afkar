import{r as c,X as O,G as R,j as a,S as V}from"./app-BNTFzJjt.js";import{column as q}from"./column-F2Q3kyWe.js";import{D as E}from"./DataTable-DrP17HvT.js";import{D as M,a as H,b as J,c as W,d as Y,f as $}from"./dialog-COx421Eb.js";import{I as f}from"./input-BxkRFBxM.js";import{L as h}from"./label-B9FUpiDI.js";import{B as g}from"./button-DC3RdRc6.js";import{S as N,a as w,b as _,c as C,d as v}from"./select-DMX6QXuM.js";import{T as z}from"./TestLayout-BulyJNSk.js";import"./checkbox-BYbjzFn2.js";import"./index-BSLpNY0K.js";import"./check-56Gy-Ton.js";import"./createLucideIcon-57-wsYf5.js";import"./index-X2qk2CYP.js";import"./index-DbLc78K4.js";import"./edit-BnQD_1Mr.js";import"./index-BC7b9wZa.js";import"./iconBase-DSShVqVP.js";import"./x-B31Bn3Ch.js";import"./index-Bh1xpr-G.js";import"./index-DPgBTQfT.js";import"./index-BhxNwGHF.js";import"./index-BTW216fJ.js";import"./chevron-down-BUHO6H_m.js";import"./format-rupiah.esm-Dv-bfkK6.js";import"./table-BvL4d_bA.js";import"./search-C10RDe92.js";import"./index-cwkvqINg.js";import"./chevron-right-P4JIv-cP.js";import"./chevrons-up-down-CTWoEGaj.js";import"./logo stai-DC2AgwFL.js";function b(){return b=Object.assign?Object.assign.bind():function(r){for(var i=1;i<arguments.length;i++){var o=arguments[i];for(var n in o)({}).hasOwnProperty.call(o,n)&&(r[n]=o[n])}return r},b.apply(null,arguments)}const G=r=>c.createElement("svg",b({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},r,{className:`paranoid-ic ${r.className?r.className:"size-4"}`,"data-slot":"icon","aria-hidden":"true"}),c.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12.75 3.25v5a1 1 0 0 0 1 1h5m-13-6.5h6.586a1 1 0 0 1 .707.293l5.914 5.914a1 1 0 0 1 .293.707V20.25a1 1 0 0 1-1 1H5.75a1 1 0 0 1-1-1V3.75a1 1 0 0 1 1-1"})),Ta=({anggarans:r,filterYear:i,filterTridharma:o,tridharmas:n})=>{const D=O().props.flash,[F,U]=c.useState(i),[u,T]=c.useState(o||"");console.log(D.success),console.log(r);const[y,p]=c.useState(!1),k=()=>{const e=new URLSearchParams({year:F,...u!=="all"&&{tridharma_id:u}}).toString();window.location.href=route("pengurus.anggaran.index")+"?"+e},A=e=>{const l=e.replace(/[^,\d]/g,"").toString().split(","),x=l[0].length%3;let j=l[0].substr(0,x);const S=l[0].substr(x).match(/\d{3}/gi);return S&&(j+=(x?".":"")+S.join(".")),j?`Rp. ${j}`:"Rp. "},{data:m,setData:d,post:P,errors:s,processing:L}=R({tridharma_id:"",perihal:"",anggaran:null,jumlah_anggaran:""}),B=e=>{const t=e.target.value.replace(/\D/g,"");d("jumlah_anggaran",t)},I=e=>{if(e.preventDefault(),!m.anggaran){alert("File anggaran harus diunggah.");return}P(route("pengurus.anggaran.store"),{onSuccess:()=>p(!1)})};return a.jsxs(z,{children:[a.jsx(V,{title:"Anggaran"}),a.jsxs("div",{className:"flex justify-between items-center flex-col md:flex-row mb-4",children:[a.jsx("h1",{className:"text-5xl font-sans font-bold",children:"Pengajuan Anggaran"}),a.jsxs(M,{open:y,onOpenChange:p,children:[a.jsx(H,{asChild:!0,children:a.jsxs(g,{variant:"blue",children:[a.jsx(G,{className:"mr-2"}),"Ajukan Anggaran"]})}),a.jsxs(J,{children:[a.jsx(W,{children:a.jsx(Y,{children:"Pengajuan Anggaran"})}),a.jsxs("form",{onSubmit:I,children:[a.jsxs("div",{className:"mb-4",children:[a.jsx(h,{htmlFor:"perihal",children:"Perihal"}),a.jsx(f,{id:"perihal",value:m.perihal,onChange:e=>d("perihal",e.target.value),required:!0}),s.perihal&&a.jsx("p",{className:"text-red-500",children:s.perihal})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx(h,{htmlFor:"tridharma_id",children:"Tridharma"}),a.jsxs(N,{value:m.tridharma_id,onValueChange:e=>d("tridharma_id",e),children:[a.jsx(w,{className:"w-full",children:a.jsx(_,{placeholder:"Pilih Tridharma"})}),a.jsx(C,{children:n.map((e,t)=>a.jsx(v,{value:e.id.toString(),children:e.nama},t))})]}),s.tridharma_id&&a.jsx("p",{className:"text-red-600",children:s.tridharma_id})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx(h,{htmlFor:"jumlah_anggaran",children:"Jumlah Anggaran"}),a.jsx(f,{id:"jumlah_anggaran",type:"text",value:A(m.jumlah_anggaran),onChange:B,required:!0}),s.jumlah_anggaran&&a.jsx("p",{className:"text-red-500",children:s.jumlah_anggaran})]}),a.jsxs("div",{className:"mb-4",children:[a.jsxs(h,{htmlFor:"anggaran",children:["File Anggaran (PDF/Word)",a.jsxs("span",{className:"text-red-500 text-sm",children:[" *",a.jsx("span",{children:"File Maksimal 5MB"})]})]}),a.jsx(f,{type:"file",id:"anggaran",onChange:e=>{var l;const t=((l=e.target.files)==null?void 0:l[0])||null;d("anggaran",t)},required:!0}),s.anggaran&&a.jsx("p",{className:"text-red-500",children:s.anggaran})]}),a.jsxs($,{children:[a.jsx(g,{type:"submit",disabled:L,children:"Ajukan"}),a.jsx(g,{variant:"outline",onClick:()=>p(!1),children:"Batal"})]})]})]})]})]}),a.jsx("hr",{className:"border-t-2 border-gray-400"}),a.jsxs("div",{className:"flex gap-2 md:max-w-xl max-w-[350px]",children:[a.jsxs(N,{value:u,onValueChange:T,children:[a.jsx(w,{children:a.jsx(_,{placeholder:"Pilih Tridharma"})}),a.jsxs(C,{children:[a.jsx(v,{value:"all",children:"Semua Tridharma"})," ",n.map(e=>a.jsx(v,{value:e.id.toString(),children:e.nama},e.id))]})]}),a.jsx(g,{onClick:k,className:"w-24",variant:"blue",children:"Filter"})]}),a.jsx(E,{data:r,columns:q})]})};export{Ta as default};
