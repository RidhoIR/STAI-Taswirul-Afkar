import{r as N,R as U,X as p,G as V,j as e,S as L}from"./app-C7IgJIa8.js";import{T as A}from"./TestLayout-CVO27UWd.js";import{column as B}from"./column-BqtbMcQs.js";import{D as O}from"./DataTable-CHtE4m5a.js";import{I as u}from"./input-BBdPmc4b.js";import{L as m}from"./label-BadbOIg2.js";import{B as d}from"./button-DcY0BuAM.js";import{D as E,a as J,b as G,c as K,d as M,e as X}from"./dialog-dlq39mOK.js";import{S as j,a as g,b as x,c as b,d as l}from"./select-s2hqHR5u.js";import{C as q,a as z}from"./card-Bf0d-8qe.js";import{S as Q}from"./sweetalert2.esm.all-9Qm2jZ7z.js";import{D as y}from"./download-Ce15OLfc.js";import"./index-BKhWWOCE.js";import"./index-H6OY2x68.js";import"./index-D9w60ah-.js";import"./index-CM3TfW-O.js";import"./x-D6OlL6cR.js";import"./createLucideIcon-DkCKh7e-.js";import"./index-Z7kUZ1Tz.js";import"./index-DkPt-R7B.js";import"./chevron-right-BVmEnaUI.js";import"./check-qsiJvuyJ.js";import"./chevrons-up-down-DaA_kmPf.js";import"./logo stai-DC2AgwFL.js";import"./format-rupiah.esm-Dv-bfkK6.js";import"./edit-lBz3QUod.js";import"./index-CBkv0MU0.js";import"./iconBase-DA-B1H5n.js";import"./chevron-down-Cf5-a9pK.js";import"./delete-BRyBkfxZ.js";import"./index-BCfdXjpb.js";import"./arrow-up-down-CiAXOEdj.js";import"./table-Bgc9A_VA.js";import"./search-PiRbSnM9.js";const He=({honor_uas:f})=>{const[D,_]=N.useState(!1),[W,Y]=U.useState(),{jenis_pembayaran:Z}=p().props,{mahasiswa:$}=p().props,{semesters:v}=p().props,{data:r,setData:n,post:w,processing:C,errors:i,reset:T}=V({semester_id:"",nama:"",tanggal:"",tugas:[{jenis_tugas:"",jumlah:"",honor_per_tugas:"",honor_total:""}]}),S=a=>{const s=typeof a=="string"?parseInt(a.replace(/[^0-9]/g,"")):a;return isNaN(s)?"Rp. ":new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(s)},k=a=>parseInt(a.replace(/[^0-9]/g,""))||0,h=(a,s,t)=>{const o=[...r.tugas];s==="honor_per_tugas"?o[a][s]=k(t):s==="jumlah"?o[a][s]=parseInt(t):o[a][s]=t,n("tugas",o)},I=()=>{n("tugas",[...r.tugas,{jenis_tugas:"",jumlah:"",honor_per_tugas:"",honor_total:""}])},P=a=>{const s=r.tugas.filter((t,o)=>o!==a);n("tugas",s)},R=a=>{a.preventDefault(),w(route("admin.bendahara.honor-ujian.uas.store"),{onSuccess:()=>{_(!1),T(),n({semester_id:"",nama:"",tanggal:"",tugas:[{jenis_tugas:"",jumlah:"",honor_per_tugas:"",honor_total:""}]})}})},[c,F]=N.useState("all"),H=c==="all"?f:f.filter(a=>a.semester.id.toString()===c);return e.jsxs(A,{children:[e.jsx(L,{title:"Honor Ujian UAS"}),e.jsx("div",{className:"md:max-w-full max-w-[350px]",children:e.jsx(q,{className:"w-full bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-100 shadow-md",children:e.jsxs(z,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"space-y-2",children:e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Honorarium Ujian UAS"})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(d,{variant:"default",onClick:()=>{if(c==="all"){Q.fire({icon:"warning",title:"Oops...",text:"Silakan pilih semester tertentu untuk mencetak laporan.",confirmButtonColor:"#3085d6"});return}const a=route("admin.bendahara.honor-ujian.laporan",{semester:c,tipe_ujian:"UAS"});window.open(a,"_blank")},children:[e.jsx(y,{className:"mr-2"})," Laporan PDF"]}),e.jsxs(j,{value:c,onValueChange:a=>F(a),children:[e.jsx(g,{className:"w-full md:w-[200px]",children:e.jsx(x,{placeholder:"Pilih Semester"})}),e.jsxs(b,{children:[e.jsx(l,{value:"all",children:"Semua Semester"}),v.map((a,s)=>e.jsxs(l,{value:a.id.toString(),children:[a.semester," ",a.tahun_ajaran]},s))]})]}),e.jsxs(E,{open:D,onOpenChange:_,children:[e.jsx(J,{asChild:!0,children:e.jsxs(d,{variant:"blue",children:[e.jsx(y,{className:"mr-2"}),"Tambah Data"]})}),e.jsxs(G,{className:"max-h-[90vh] overflow-y-auto",children:[e.jsxs(K,{children:[e.jsx(M,{children:"Tambah Data"}),e.jsx(X,{children:"Silahkan Masukkan Data yang sesuai"})]}),e.jsxs("form",{onSubmit:R,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(m,{children:"Nama"}),e.jsx(u,{value:r.nama,onChange:a=>n("nama",a.target.value)}),i.nama&&e.jsx("p",{className:"text-red-500",children:i.nama})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(m,{htmlFor:"semester_id",children:"Semester"}),e.jsxs(j,{value:r.semester_id,onValueChange:a=>n("semester_id",a),children:[e.jsx(g,{className:"w-full",children:e.jsx(x,{placeholder:"Pilih Semester"})}),e.jsx(b,{children:v.map((a,s)=>e.jsxs(l,{value:a.id.toString(),children:[a.semester," ",a.tahun_ajaran]},s))})]}),i.semester_id&&e.jsx("p",{className:"text-red-600",children:i.semester_id})]}),e.jsxs("div",{children:[e.jsx(m,{children:"Tanggal"}),e.jsx(u,{type:"date",value:r.tanggal,onChange:a=>n("tanggal",a.target.value)}),i.tanggal&&e.jsx("p",{className:"text-red-500",children:i.tanggal})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-bold text-lg",children:"Tugas"}),r.tugas.map((a,s)=>e.jsxs("div",{className:"border p-4 rounded space-y-2",children:[e.jsxs("div",{children:[e.jsx(m,{children:"Jenis Tugas"}),e.jsxs(j,{value:a.jenis_tugas,onValueChange:t=>h(s,"jenis_tugas",t),children:[e.jsx(g,{className:"w-full",children:e.jsx(x,{placeholder:"Pilih Tugas"})}),e.jsxs(b,{children:[e.jsx(l,{value:"pembuat soal",children:"Pembuat Soal"}),e.jsx(l,{value:"korektor",children:"Korektor"}),e.jsx(l,{value:"pengawas",children:"Pengawas"}),e.jsx(l,{value:"panitia",children:"Panitia"})]})]})]}),(a.jenis_tugas==="pembuat soal"||a.jenis_tugas==="korektor"||a.jenis_tugas==="pengawas")&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(m,{children:"Jumlah"}),e.jsx(u,{type:"number",value:isNaN(Number(a.jumlah))?"":a.jumlah,onChange:t=>h(s,"jumlah",t.target.value)})]}),e.jsx(u,{type:"text",value:S(a.honor_per_tugas),onChange:t=>h(s,"honor_per_tugas",t.target.value)})]}),a.jenis_tugas==="panitia"&&e.jsxs("div",{children:[e.jsx(m,{children:"Honor"}),e.jsx(u,{type:"text",value:S(a.honor_per_tugas),onChange:t=>h(s,"honor_per_tugas",t.target.value)})]}),e.jsx(d,{type:"button",variant:"destructive",onClick:()=>P(s),children:"Hapus Tugas"})]},s)),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(d,{type:"button",onClick:I,children:"Tambah Tugas"}),e.jsx(d,{variant:"blue",type:"submit",disabled:C,children:"Simpan"})]})]})]})]})]})]})]}),e.jsx("hr",{className:"border-t-2 border-gray-400"})]})})}),e.jsx(O,{data:H,columns:B})]})};export{He as default};
