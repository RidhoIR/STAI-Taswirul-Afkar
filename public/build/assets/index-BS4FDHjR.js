import{r as k,j as a,R as E,X as b,G as L,S as O}from"./app-Cq20QrRz.js";import{T as V}from"./TestLayout-BqYkx1ic.js";import{column as B}from"./column-B7p6QcN5.js";import{D as J}from"./DataTable-DN42BHmi.js";import{I as v}from"./input-C5rDHr5D.js";import{L as m}from"./label-TukXHBQr.js";import{B as g}from"./button-DrnRyrw2.js";import{D as M,a as G,b as q,c as A,d as H,f as K}from"./dialog-xZ33bj-4.js";import{S as w,a as _,b as N,c as D,d as S}from"./select-BWswDKmn.js";import{C as X,a as $}from"./card-CpbFmv0S.js";import{D as z}from"./x-upm_IIYa.js";import{C as Q,a as U,b as W,d as Y,e as Z,c as aa}from"./command-DsqzfC8Q.js";import{P as ea,a as sa,b as ra}from"./popover-CQZDny2s.js";import{c as ia}from"./index-BPyi8Oh_.js";import{C as ta}from"./chevron-down-BdJOh192.js";import{C as la}from"./check-BPv1hbry.js";import{D as na}from"./download-B-JCuiWV.js";import"./index-TdP1Xolx.js";import"./index-D5c50GQy.js";import"./index-AYIn2lum.js";import"./index-C9hU1MwT.js";import"./index-l3wdiPOb.js";import"./createLucideIcon-BzBnNE0M.js";import"./chevron-right-BAF2NJKf.js";import"./chevrons-up-down-CBKmxzOF.js";import"./logo stai-DC2AgwFL.js";import"./arrow-up-down-BQYZp2aS.js";import"./table-D-9KYxmc.js";import"./search-Pp3enZ9B.js";const oa=({options:d,value:n,onValueChange:o,placeholder:f="Pilih...",searchPlaceholder:y="Cari..."})=>{var i;const[h,c]=k.useState(!1),p=s=>{o(s),c(!1)};return a.jsxs(ea,{open:h,onOpenChange:c,children:[a.jsx(sa,{asChild:!0,children:a.jsxs("button",{type:"button",className:ia("flex w-full items-center justify-between rounded-md border px-3 py-2 text-sm",!n&&"text-muted-foreground"),onClick:s=>{s.stopPropagation()},children:[((i=d.find(s=>s.value===n))==null?void 0:i.label)||f,a.jsx(ta,{className:"ml-2 h-4 w-4 opacity-50"})]})}),a.jsx(ra,{className:"w-[var(--radix-popover-trigger-width)] p-0",children:a.jsxs(Q,{shouldFilter:!0,children:[a.jsx(U,{placeholder:y}),a.jsxs(W,{children:[a.jsx(Y,{children:"Tidak ditemukan"}),a.jsx(Z,{children:d.map(s=>a.jsxs(aa,{value:s.label,onSelect:()=>p(s.value),onKeyDown:l=>{l.key==="Enter"&&(l.preventDefault(),p(s.value))},onClick:l=>{l.stopPropagation()},children:[s.label,n===s.value&&a.jsx(la,{className:"ml-auto h-4 w-4 opacity-50"})]},s.value))})]})]})})]})},Ja=({transaksi:d})=>{const[n,o]=k.useState(!1),[f,y]=E.useState(),{jenis_pembayaran:h}=b().props,{mahasiswa:c}=b().props,{semesters:p}=b().props,{data:i,setData:s,post:l,processing:P,errors:r}=L({mahasiswa_id:"",jenis_pembayaran_id:"",semester_id:"",jumlah:"",deskripsi:""}),T=e=>{e.preventDefault(),l(route("admin.bendahara.transaksi.store",i.mahasiswa_id),{onSuccess:()=>{o(!1),console.log("Pembayaran berhasil")},onError:t=>{console.log(t)}})},R=(c??[]).map(e=>({label:e.name,value:e.id.toString()})),F=e=>{const x=e.replace(/[^,\d]/g,"").toString().split(","),j=x[0].length%3;let u=x[0].substr(0,j);const C=x[0].substr(j).match(/\d{3}/gi);return C&&(u+=(j?".":"")+C.join(".")),u?`Rp. ${u}`:"Rp. "},I=e=>{const t=e.target.value.replace(/\D/g,"");s("jumlah",t)};return a.jsxs(V,{children:[a.jsx(O,{title:"Riwayat Pembayaran"}),a.jsx("div",{className:"md:max-w-full max-w-[350px]",children:a.jsx(X,{className:"w-full bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-100 shadow-md",children:a.jsxs($,{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("div",{className:"space-y-2",children:a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Riwayat Pembayaran"})}),a.jsxs(M,{open:n,onOpenChange:o,modal:!1,children:[a.jsx(G,{asChild:!0,children:a.jsxs(g,{variant:"blue",children:[a.jsx(na,{className:"mr-2"}),"Tambah Pembayaran"]})}),a.jsxs(q,{children:[a.jsxs(A,{children:[a.jsx(H,{children:"Tambah Pembayaran"}),a.jsx(z,{children:"Masukkan data pembayaran"})]}),a.jsxs("form",{onSubmit:T,children:[a.jsxs("div",{className:"mb-4",children:[a.jsx(m,{htmlFor:"mahasiswa_id",children:"Mahasiswa"}),a.jsx(oa,{value:i.mahasiswa_id,onValueChange:e=>s("mahasiswa_id",e),options:R}),r.mahasiswa_id&&a.jsx("p",{className:"text-red-600",children:r.mahasiswa_id})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx(m,{htmlFor:"jenis_pembayaran_id",children:"Jenis Pembayaran"}),a.jsxs(w,{value:i.jenis_pembayaran_id,onValueChange:e=>s("jenis_pembayaran_id",e),children:[a.jsx(_,{className:"w-full",children:a.jsx(N,{placeholder:"Pilih jenis pembayaran"})}),a.jsx(D,{children:h.map((e,t)=>a.jsx(S,{value:e.id.toString(),children:e.nama_pembayaran},t))})]}),r.jenis_pembayaran_id&&a.jsx("p",{className:"text-red-600",children:r.jenis_pembayaran_id})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx(m,{htmlFor:"semester_id",children:"Semester"}),a.jsxs(w,{value:i.semester_id,onValueChange:e=>s("semester_id",e),children:[a.jsx(_,{className:"w-full",children:a.jsx(N,{placeholder:"Pilih jenis pembayaran"})}),a.jsx(D,{children:p.map((e,t)=>a.jsxs(S,{value:e.id.toString(),children:[e.semester," ",e.tahun_ajaran]},t))})]}),r.semester_id&&a.jsx("p",{className:"text-red-600",children:r.semester_id})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx(m,{htmlFor:"deskripsi",children:"Deskripsi"}),a.jsx(v,{id:"deskripsi",type:"text",value:i.deskripsi,onChange:e=>s("deskripsi",e.target.value)}),r.deskripsi&&a.jsx("p",{className:"text-red-500",children:r.deskripsi})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx(m,{htmlFor:"jumlah",children:"Jumlah"}),a.jsx(v,{id:"jumlah",type:"text",value:F(i.jumlah),onChange:I,required:!0}),r.jumlah&&a.jsx("p",{className:"text-red-500",children:r.jumlah})]}),a.jsxs(K,{children:[a.jsx(g,{type:"submit",disabled:P,children:"Ajukan"}),a.jsx(g,{variant:"outline",onClick:()=>o(!1),children:"Batal"})]})]})]})]})]}),a.jsx("hr",{className:"border-t-2 border-gray-400"})]})})}),a.jsx(J,{data:d,columns:B})]})};export{Ja as default};
