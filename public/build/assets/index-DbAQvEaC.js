import{r as j,R as M,X as d,G as E,j as e,S as J}from"./app-Dpd_WoHs.js";import{T as A}from"./TestLayout-3IXZ4hsa.js";import{column as K}from"./column-B2u8BRj9.js";import{D as V}from"./DataTable-BgDirrl7.js";import{I as o}from"./input-DoIcghjK.js";import{L as t}from"./label-BocVdXVz.js";import{B as n}from"./button-YoPaNfqN.js";import{D as C,a as k,b as S,c as D,d as w,e as G,f as F}from"./dialog-C8mLk1JF.js";import{S as X,a as $,b as z,c as Q,d as U}from"./select-Aa0Y-J6M.js";import{C as W,a as Y}from"./card-DkAtpmJk.js";import{S as Z}from"./sweetalert2.esm.all-9Qm2jZ7z.js";import{D as b}from"./download-Dx1ntZPY.js";import{f as ee}from"./index-De3-l1Pq.js";import"./index-CoGVp2Xx.js";import"./index-0Jt9BsbZ.js";import"./index-ZALyfwZc.js";import"./x-DasdxAuq.js";import"./createLucideIcon-DNr5rqxP.js";import"./index-Bm9g4BR4.js";import"./index-BbbAkRGd.js";import"./chevron-right-BiqXL9tL.js";import"./check-DSWxz-ZR.js";import"./chevrons-up-down-D_HqMPlt.js";import"./logo stai-DC2AgwFL.js";import"./format-rupiah.esm-Dv-bfkK6.js";import"./edit-DRAabsrb.js";import"./index-C8sSbsao.js";import"./iconBase-LP_vYqXK.js";import"./delete-CFRZP-eQ.js";import"./index-D-tiBxry.js";import"./arrow-up-down-BR6UARig.js";import"./table-bWUaqtiH.js";import"./chevron-down-YSHAYp-x.js";import"./search-CiYcl0BR.js";const Je=({honorariums:P})=>{const[R,c]=j.useState(!1),[L,p]=j.useState(!1),[ae,se]=M.useState(),{jenis_pembayaran:re}=d().props,{mahasiswa:te}=d().props,{semesters:ne}=d().props,{jabatan:T}=d().props,{data:i,setData:l,post:g,processing:f,errors:s,reset:v}=E({name:"",jabatan_id:"",jumlah:"",periode:"",jumlah_mk:"",honor_mk:"",lain_lain:""}),H=a=>{a.preventDefault(),g(route("admin.bendahara.honorarium.copy")),p(!1),v()},O=a=>{a.preventDefault(),g(route("admin.bendahara.honorarium.store"),{onSuccess:()=>{c(!1),v(),console.log("Pembayaran berhasil")},onError:r=>{console.log(r)}})},N=a=>{const h=a.replace(/[^,\d]/g,"").toString().split(","),x=h[0].length%3;let u=h[0].substr(0,x);const _=h[0].substr(x).match(/\d{3}/gi);return _&&(u+=(x?".":"")+_.join(".")),u?`Rp. ${u}`:"Rp. "},B=a=>{const r=a.target.value.replace(/\D/g,"");l("honor_mk",r)},q=a=>{const r=a.target.value.replace(/\D/g,"");l("lain_lain",r)},[m,y]=j.useState(""),I=P.filter(a=>m===""||ee(new Date(a.periode),"yyyy-MM")===m);return e.jsxs(A,{children:[e.jsx(J,{title:"Riwayat Pembayaran"}),e.jsx("div",{className:"md:max-w-full max-w-[350px]",children:e.jsx(W,{className:"w-full bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-100 shadow-md",children:e.jsxs(Y,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"space-y-2",children:e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Honorarium"})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(n,{variant:"default",onClick:()=>{if(!m){Z.fire({icon:"warning",title:"Oops...",text:"Silakan pilih periode terlebih dahulu.",confirmButtonColor:"#3085d6"});return}const a=route("admin.bendahara.honorarium.pdf",{periode:m});window.open(a,"_blank")},children:[e.jsx(b,{className:"mr-2"})," Laporan PDF"]}),e.jsxs(C,{open:L,onOpenChange:p,children:[e.jsx(k,{asChild:!0,children:e.jsxs(n,{variant:"outline",children:[e.jsx(b,{className:"mr-2"}),"Salin Data"]})}),e.jsxs(S,{children:[e.jsxs(D,{children:[e.jsx(w,{children:"Salin Data"}),e.jsx(G,{children:"Silahkan inputkan bulan yang ingin ditambahkan dengan menyalin data dari bulan sebelumnya"})]}),e.jsxs("form",{onSubmit:H,children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs(t,{htmlFor:"periode",children:["Periode",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(o,{id:"periode",type:"month",value:i.periode,onChange:a=>l("periode",a.target.value),required:!0}),s.periode&&e.jsx("p",{className:"text-red-500",children:s.periode})]}),e.jsxs(F,{children:[e.jsx(n,{type:"submit",disabled:f,children:"Ajukan"}),e.jsx(n,{type:"button",variant:"outline",onClick:()=>p(!1),children:"Batal"})]})]})]})]}),e.jsxs(C,{open:R,onOpenChange:c,children:[e.jsx(k,{asChild:!0,children:e.jsxs(n,{variant:"blue",children:[e.jsx(b,{className:"mr-2"}),"Tambah Data"]})}),e.jsxs(S,{className:"max-h-[90vh] overflow-y-auto",children:[e.jsx(D,{children:e.jsx(w,{children:"Honorarium"})}),e.jsxs("form",{onSubmit:O,children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs(t,{htmlFor:"name",children:["Nama",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(o,{id:"name",type:"text",value:i.name,onChange:a=>l("name",a.target.value),required:!0}),s.name&&e.jsx("p",{className:"text-red-500",children:s.name})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs(t,{htmlFor:"jabatan_id",children:["Jabatan ",e.jsx("span",{className:"text-gray-600",children:"(opsional)"})]}),e.jsxs(X,{value:i.jabatan_id,onValueChange:a=>l("jabatan_id",a),children:[e.jsx($,{className:"w-full",children:e.jsx(z,{placeholder:"Pilih Jabatan"})}),e.jsx(Q,{children:T.map((a,r)=>e.jsx(U,{value:a.id.toString(),children:a.name},r))})]}),s.jabatan_id&&e.jsx("p",{className:"text-red-600",children:s.jabatan_id})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs(t,{htmlFor:"periode",children:["Periode",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(o,{id:"periode",type:"month",value:i.periode,onChange:a=>l("periode",a.target.value),required:!0}),s.periode&&e.jsx("p",{className:"text-red-500",children:s.periode})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs(t,{htmlFor:"jumlah_mk",children:["Jumlah MK ",e.jsx("span",{className:"text-gray-600",children:"(opsional)"})]}),e.jsx(o,{id:"jumlah_mk",type:"number",value:i.jumlah_mk,onChange:a=>l("jumlah_mk",a.target.value)}),s.jumlah_mk&&e.jsx("p",{className:"text-red-500",children:s.jumlah_mk})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs(t,{htmlFor:"honor_mk",children:["Honor ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(o,{id:"honor_mk",type:"text",value:N(i.honor_mk),onChange:B,required:!0}),s.honor_mk&&e.jsx("p",{className:"text-red-500",children:s.honor_mk})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs(t,{htmlFor:"lain_lain",children:["Lain-lain ",e.jsx("span",{className:"text-gray-600",children:"(opsional)"})]}),e.jsx(o,{id:"lain_lain",type:"text",value:N(i.lain_lain),onChange:q}),s.lain_lain&&e.jsx("p",{className:"text-red-500",children:s.lain_lain})]}),e.jsxs(F,{children:[e.jsx(n,{type:"submit",disabled:f,children:"Ajukan"}),e.jsx(n,{type:"button",variant:"outline",onClick:()=>c(!1),children:"Batal"})]})]})]})]})]})]}),e.jsx("hr",{className:"border-t-2 border-gray-400"})]})})}),e.jsxs("div",{className:"flex items-center gap-2 mt-4",children:[e.jsx(t,{htmlFor:"filter-periode",children:"Filter Periode:"}),e.jsx(o,{id:"filter-periode",type:"month",value:m,onChange:a=>y(a.target.value),className:"max-w-[200px]"}),e.jsx(n,{variant:"outline",onClick:()=>y(""),children:"Reset"})]}),e.jsx(V,{data:I,columns:K})]})};export{Je as default};
