import{r as S,R as V,X as h,G as L,j as e,S as B}from"./app-CA2mjpBr.js";import{T as O}from"./TestLayout-D_vKyAxN.js";import{column as E}from"./column-FyM-h-Mw.js";import{D as J}from"./DataTable-rtRg4zVm.js";import{I as d}from"./input-lBXeKX99.js";import{L as m}from"./label-D_WdtwF8.js";import{B as u}from"./button-DxUUCjWz.js";import{D as G,a as M,b as X,c as q,d as z,e as A}from"./dialog-BP4OfGlF.js";import{S as j,a as g,b as x,c as b,d as l}from"./select-CDbfhATj.js";import{C as K,a as Q}from"./card-BAj7Qlfb.js";import{S as U}from"./sweetalert2.esm.all-9Qm2jZ7z.js";import{D as y}from"./download-8YJzcL5g.js";import"./index-CQ2P0si6.js";import"./index-Ds9rPRju.js";import"./index-DVW3RaW7.js";import"./index-DTJ7YwaW.js";import"./x-CvdxRxSJ.js";import"./createLucideIcon-DNPJUewd.js";import"./index-BUwdnkJY.js";import"./index-Br0LjNwL.js";import"./chevron-right-BhuqQ7Hl.js";import"./check-SibKoqf7.js";import"./chevrons-up-down-Dg93UcdG.js";import"./logo stai-DC2AgwFL.js";import"./format-rupiah.esm-Dv-bfkK6.js";import"./edit-DosGOiWp.js";import"./index-BU7nn6Mj.js";import"./iconBase-BPUyq2r6.js";import"./chevron-down-frWjNTtx.js";import"./delete-BfvdRcGf.js";import"./index-CLd4Atom.js";import"./table-CEDbT5s_.js";import"./search-DnQvP1Xn.js";const Fe=({honor_proposal:f})=>{const[D,_]=S.useState(!1),[W,Y]=V.useState(),{jenis_pembayaran:Z}=h().props,{mahasiswa:$}=h().props,{semesters:v}=h().props,{data:t,setData:n,post:C,processing:T,errors:i,reset:w}=L({semester_id:"",nama:"",tanggal:"",tugas:[{jenis_tugas:"",jumlah:"",honor_per_tugas:"",honor_total:""}]}),N=a=>{const s=typeof a=="string"?parseInt(a.replace(/[^0-9]/g,"")):a;return isNaN(s)?"Rp. ":new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(s)},k=a=>parseInt(a.replace(/[^0-9]/g,""))||0,p=(a,s,r)=>{const o=[...t.tugas];s==="honor_per_tugas"?o[a][s]=k(r):s==="jumlah"?o[a][s]=parseInt(r):o[a][s]=r,n("tugas",o)},I=()=>{n("tugas",[...t.tugas,{jenis_tugas:"",jumlah:"",honor_per_tugas:"",honor_total:""}])},P=a=>{const s=t.tugas.filter((r,o)=>o!==a);n("tugas",s)},R=a=>{a.preventDefault(),C(route("admin.bendahara.honor-proposal.store"),{onSuccess:()=>{_(!1),w(),n({semester_id:"",nama:"",tanggal:"",tugas:[{jenis_tugas:"",jumlah:"",honor_per_tugas:"",honor_total:""}]})}})},[c,F]=S.useState("all"),H=c==="all"?f:f.filter(a=>a.semester.id.toString()===c);return e.jsxs(O,{children:[e.jsx(B,{title:"Honor Proposal"}),e.jsx("div",{className:"md:max-w-full max-w-[350px]",children:e.jsx(K,{className:"w-full bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-100 shadow-md",children:e.jsxs(Q,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"space-y-2",children:e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Honorarium Proposal"})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(u,{variant:"default",onClick:()=>{if(c==="all"){U.fire({icon:"warning",title:"Oops...",text:"Silakan pilih semester tertentu untuk mencetak laporan.",confirmButtonColor:"#3085d6"});return}const a=route("admin.bendahara.honor-proposal.laporan",{semester:c});window.open(a,"_blank")},children:[e.jsx(y,{className:"mr-2"})," Laporan PDF"]}),e.jsxs(j,{value:c,onValueChange:a=>F(a),children:[e.jsx(g,{className:"w-full md:w-[200px]",children:e.jsx(x,{placeholder:"Pilih Semester"})}),e.jsxs(b,{children:[e.jsx(l,{value:"all",children:"Semua Semester"}),v.map((a,s)=>e.jsxs(l,{value:a.id.toString(),children:[a.semester," ",a.tahun_ajaran]},s))]})]}),e.jsxs(G,{open:D,onOpenChange:_,children:[e.jsx(M,{asChild:!0,children:e.jsxs(u,{variant:"blue",children:[e.jsx(y,{className:"mr-2"}),"Tambah Data"]})}),e.jsxs(X,{className:"max-h-[90vh] overflow-y-auto",children:[e.jsxs(q,{children:[e.jsx(z,{children:"Tambah Data"}),e.jsx(A,{children:"Silahkan Masukkan Data yang sesuai"})]}),e.jsxs("form",{onSubmit:R,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(m,{children:"Nama"}),e.jsx(d,{value:t.nama,onChange:a=>n("nama",a.target.value)}),i.nama&&e.jsx("p",{className:"text-red-500",children:i.nama})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(m,{htmlFor:"semester_id",children:"Semester"}),e.jsxs(j,{value:t.semester_id,onValueChange:a=>n("semester_id",a),children:[e.jsx(g,{className:"w-full",children:e.jsx(x,{placeholder:"Pilih Semester"})}),e.jsx(b,{children:v.map((a,s)=>e.jsxs(l,{value:a.id.toString(),children:[a.semester," ",a.tahun_ajaran]},s))})]}),i.semester_id&&e.jsx("p",{className:"text-red-600",children:i.semester_id})]}),e.jsxs("div",{children:[e.jsx(m,{children:"Tanggal"}),e.jsx(d,{type:"date",value:t.tanggal,onChange:a=>n("tanggal",a.target.value)}),i.tanggal&&e.jsx("p",{className:"text-red-500",children:i.tanggal})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-bold text-lg",children:"Tugas"}),t.tugas.map((a,s)=>e.jsxs("div",{className:"border p-4 rounded space-y-2",children:[e.jsxs("div",{children:[e.jsx(m,{children:"Jenis Tugas"}),e.jsxs(j,{value:a.jenis_tugas,onValueChange:r=>p(s,"jenis_tugas",r),children:[e.jsx(g,{className:"w-full",children:e.jsx(x,{placeholder:"Pilih Tugas"})}),e.jsxs(b,{children:[e.jsx(l,{value:"penguji",children:"Penguji"}),e.jsx(l,{value:"pembimbing",children:"Pembimbing"}),e.jsx(l,{value:"panitia",children:"Panitia"}),e.jsx(l,{value:"sekretaris",children:"Sekretaris"})]})]})]}),(a.jenis_tugas==="penguji"||a.jenis_tugas==="pembimbing")&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(m,{children:"Jumlah"}),e.jsx(d,{type:"number",value:isNaN(Number(a.jumlah))?"":a.jumlah,onChange:r=>p(s,"jumlah",r.target.value)})]}),e.jsx(d,{type:"text",value:N(a.honor_per_tugas),onChange:r=>p(s,"honor_per_tugas",r.target.value)})]}),(a.jenis_tugas==="panitia"||a.jenis_tugas==="sekretaris")&&e.jsxs("div",{children:[e.jsx(m,{children:"Honor"}),e.jsx(d,{type:"text",value:N(a.honor_per_tugas),onChange:r=>p(s,"honor_per_tugas",r.target.value)})]}),e.jsx(u,{type:"button",variant:"destructive",onClick:()=>P(s),children:"Hapus Tugas"})]},s)),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(u,{type:"button",onClick:I,children:"Tambah Tugas"}),e.jsx(u,{variant:"blue",type:"submit",disabled:T,children:"Simpan"})]})]})]})]})]})]})]}),e.jsx("hr",{className:"border-t-2 border-gray-400"})]})})}),e.jsx(J,{data:H,columns:E})]})};export{Fe as default};
