import{j as e,r as o,S as Z}from"./app-CA2mjpBr.js";import{T as ee}from"./TestLayout-D_vKyAxN.js";import{C as p,b as k,c as C,a as _,e as O,d as se}from"./card-BAj7Qlfb.js";import{f as D,c as f,a as ae}from"./index-DTJ7YwaW.js";import{R as V,B as H,X as U,Y as re,T as q,a as B,b as te,C as ne}from"./BarChart-CuDgTohB.js";import{S as F,a as K,b as R,c as A,d as z}from"./select-CDbfhATj.js";import{B as le}from"./button-DxUUCjWz.js";import{C as ce,i as Y,s as ie,e as oe}from"./calendar-Ie2dd5AD.js";import{P as de,a as he,b as xe}from"./popover-DzckY3iO.js";import{C as me}from"./calendar-N6ULoOAb.js";import{F as L}from"./format-rupiah.esm-Dv-bfkK6.js";import{c as T}from"./createLucideIcon-DNPJUewd.js";import"./index-CQ2P0si6.js";import"./index-Ds9rPRju.js";import"./index-DVW3RaW7.js";import"./input-lBXeKX99.js";import"./x-CvdxRxSJ.js";import"./index-BUwdnkJY.js";import"./index-Br0LjNwL.js";import"./chevron-right-BhuqQ7Hl.js";import"./check-SibKoqf7.js";import"./chevrons-up-down-Dg93UcdG.js";import"./logo stai-DC2AgwFL.js";import"./index-DQp4iJN8.js";import"./chevron-down-frWjNTtx.js";import"./chevron-left-CyjupNBU.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=T("CircleArrowDown",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=T("CircleArrowUp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=T("CircleDollarSign",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 18V6",key:"zqpxq5"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=T("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=T("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);function ge({title:n,data:s}){const t=[{status:"Lunas",value:s.lunas,color:"var(--chart-lunas)"},{status:"Belum Lunas",value:s.belum_lunas,color:"var(--chart-belum-lunas)"},{status:"Belum Bayar",value:s.belum_bayar,color:"var(--chart-belum-bayar)"}];return e.jsxs(p,{className:"flex flex-col",children:[e.jsx(k,{className:"items-center pb-0",children:e.jsx(C,{children:n})}),e.jsx(_,{className:"flex-1 pb-0",children:e.jsx(V,{width:"100%",height:200,children:e.jsxs(H,{data:t,margin:{top:10,right:20,left:0,bottom:10},children:[e.jsx(U,{dataKey:"status"}),e.jsx(re,{allowDecimals:!1}),e.jsx(q,{}),e.jsx(B,{dataKey:"value",children:t.map((a,c)=>e.jsx(te,{fill:a.color},`cell-${c}`))})]})})}),e.jsx(O,{className:"flex-col gap-2 text-sm",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-3 h-3 rounded-full",style:{backgroundColor:"var(--chart-lunas)"}}),e.jsx("span",{children:"Lunas"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-3 h-3 rounded-full",style:{backgroundColor:"var(--chart-belum-lunas)"}}),e.jsx("span",{children:"Belum Lunas"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-3 h-3 rounded-full",style:{backgroundColor:"var(--chart-belum-bayar)"}}),e.jsx("span",{children:"Belum Bayar"})]})]})})]})}const be=({from:n,to:s,onSelect:t})=>e.jsx("div",{className:"grid gap-2",children:e.jsxs(de,{children:[e.jsx(he,{asChild:!0,children:e.jsxs(le,{id:"date",variant:"outline",className:f("w-[280px] justify-start text-left font-normal",!n&&"text-muted-foreground"),children:[e.jsx(me,{className:"mr-2 h-4 w-4"}),n?s?e.jsxs(e.Fragment,{children:[D(n,"LLL dd, y")," -"," ",D(s,"LLL dd, y")]}):D(n,"LLL dd, y"):e.jsx("span",{children:"Pilih rentang tanggal"})]})}),e.jsx(xe,{className:"w-auto p-0",align:"start",children:e.jsx(ce,{initialFocus:!0,mode:"range",defaultMonth:n,selected:{from:n,to:s},onSelect:a=>{n&&s&&(a!=null&&a.from)&&(a!=null&&a.to)&&Y(n,a.from)&&Y(s,a.to)?t(void 0,void 0):t(a==null?void 0:a.from,a==null?void 0:a.to)},numberOfMonths:2,className:"pointer-events-auto"})})]})}),ye={light:"",dark:".dark"},X=o.createContext(null);function G(){const n=o.useContext(X);if(!n)throw new Error("useChart must be used within a <ChartContainer />");return n}const Q=o.forwardRef(({id:n,className:s,children:t,config:a,...c},g)=>{const d=o.useId(),i=`chart-${n||d.replace(/:/g,"")}`;return e.jsx(X.Provider,{value:{config:a},children:e.jsxs("div",{"data-chart":i,ref:g,className:f("flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none",s),...c,children:[e.jsx(Ne,{id:i,config:a}),e.jsx(V,{children:t})]})})});Q.displayName="Chart";const Ne=({id:n,config:s})=>{const t=Object.entries(s).filter(([,a])=>a.theme||a.color);return t.length?e.jsx("style",{dangerouslySetInnerHTML:{__html:Object.entries(ye).map(([a,c])=>`
${c} [data-chart=${n}] {
${t.map(([g,d])=>{var h;const i=((h=d.theme)==null?void 0:h[a])||d.color;return i?`  --color-${g}: ${i};`:null}).join(`
`)}
}
`).join(`
`)}}):null},ve=q,W=o.forwardRef(({active:n,payload:s,className:t,indicator:a="dot",hideLabel:c=!1,hideIndicator:g=!1,label:d,labelFormatter:i,labelClassName:h,formatter:u,color:v,nameKey:M,labelKey:S},$)=>{const{config:x}=G(),P=o.useMemo(()=>{var N;if(c||!(s!=null&&s.length))return null;const[l]=s,b=`${S||(l==null?void 0:l.dataKey)||(l==null?void 0:l.name)||"value"}`,y=I(x,l,b),m=!S&&typeof d=="string"?((N=x[d])==null?void 0:N.label)||d:y==null?void 0:y.label;return i?e.jsx("div",{className:f("font-medium",h),children:i(m,s)}):m?e.jsx("div",{className:f("font-medium",h),children:m}):null},[d,i,s,c,h,x,S]);if(!n||!(s!=null&&s.length))return null;const w=s.length===1&&a!=="dot";return e.jsxs("div",{ref:$,className:f("grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl",t),children:[w?null:P,e.jsx("div",{className:"grid gap-1.5",children:s.map((l,b)=>{const y=`${M||l.name||l.dataKey||"value"}`,m=I(x,l,y),N=v||l.payload.fill||l.color;return e.jsx("div",{className:f("flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground",a==="dot"&&"items-center"),children:u&&(l==null?void 0:l.value)!==void 0&&l.name?u(l.value,l.name,l,b,l.payload):e.jsxs(e.Fragment,{children:[m!=null&&m.icon?e.jsx(m.icon,{}):!g&&e.jsx("div",{className:f("shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]",{"h-2.5 w-2.5":a==="dot","w-1":a==="line","w-0 border-[1.5px] border-dashed bg-transparent":a==="dashed","my-0.5":w&&a==="dashed"}),style:{"--color-bg":N,"--color-border":N}}),e.jsxs("div",{className:f("flex flex-1 justify-between leading-none",w?"items-end":"items-center"),children:[e.jsxs("div",{className:"grid gap-1.5",children:[w?P:null,e.jsx("span",{className:"text-muted-foreground",children:(m==null?void 0:m.label)||l.name})]}),l.value&&e.jsx("span",{className:"font-mono font-medium tabular-nums text-foreground",children:l.value.toLocaleString()})]})]})},l.dataKey)})})]})});W.displayName="ChartTooltip";const we=o.forwardRef(({className:n,hideIcon:s=!1,payload:t,verticalAlign:a="bottom",nameKey:c},g)=>{const{config:d}=G();return t!=null&&t.length?e.jsx("div",{ref:g,className:f("flex items-center justify-center gap-4",a==="top"?"pb-3":"pt-3",n),children:t.map(i=>{const h=`${c||i.dataKey||"value"}`,u=I(d,i,h);return e.jsxs("div",{className:f("flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground"),children:[u!=null&&u.icon&&!s?e.jsx(u.icon,{}):e.jsx("div",{className:"h-2 w-2 shrink-0 rounded-[2px]",style:{backgroundColor:i.color}}),u==null?void 0:u.label]},i.value)})}):null});we.displayName="ChartLegend";function I(n,s,t){if(typeof s!="object"||s===null)return;const a="payload"in s&&typeof s.payload=="object"&&s.payload!==null?s.payload:void 0;let c=t;return t in s&&typeof s[t]=="string"?c=s[t]:a&&t in a&&typeof a[t]=="string"&&(c=a[t]),c in n?n[c]:n[t]}function ke({data:n}){const s={pemasukan:{label:"Pemasukan",color:"#4ade80"},pengeluaran:{label:"Pengeluaran",color:"#f87171"}};return e.jsxs(p,{className:"",children:[e.jsxs(k,{children:[e.jsx(C,{children:"Pemasukan & Pengeluaran per Bulan"}),e.jsx(se,{children:"Data berdasarkan tahun terpilih"})]}),e.jsx(_,{children:e.jsx(Q,{config:s,className:"h-[300px] w-full",children:e.jsxs(H,{data:n,children:[e.jsx(ne,{vertical:!1}),e.jsx(U,{dataKey:"bulan",tickLine:!1,tickMargin:10,axisLine:!1,tickFormatter:t=>t.slice(0,3)}),e.jsx(ve,{cursor:!1,content:e.jsx(W,{indicator:"dashed"})}),e.jsx(B,{dataKey:"pemasukan",fill:"#4ade80",radius:4}),e.jsx(B,{dataKey:"pengeluaran",fill:"#f87171",radius:4})]})})}),e.jsxs(O,{className:"flex-col items-start gap-2 text-sm",children:[e.jsxs("div",{className:"flex gap-2 leading-none font-medium",children:["Tren keuangan tahunan ",e.jsx(J,{className:"h-4 w-4"})]}),e.jsx("div",{className:"text-muted-foreground leading-none",children:"Menampilkan data bulanan dari Januari hingga Desember"})]})]})}const Qe=({laporans:n,semesters:s,latestTransactions:t})=>{var E;const[a,c]=o.useState(((E=s[s.length-1])==null?void 0:E.id)??0),[g,d]=o.useState([]),i=r=>{c(r),fetch(`/dashboard/bendahara/chart-by-semester?semester_id=${r}`).then(j=>j.json()).then(j=>{d(j)})};o.useEffect(()=>{a&&i(a)},[]);const[h,u]=o.useState(ie(new Date)),[v,M]=o.useState(oe(new Date)),S=h?D(h,"yyyy-MM-dd"):null,$=v?D(v,"yyyy-MM-dd"):null,[x,P]=o.useState({pemasukan:0,pengeluaran:0,laba_rugi:0,saldo:0,grafik:{pemasukan:0,pengeluaran:0}});o.useEffect(()=>{fetch(`/dashboard/bendahara/summary?start_date=${S}&end_date=${$}`).then(r=>r.json()).then(r=>P(r))},[h,v]);const w=new Date().getFullYear(),l=Array.from({length:w-2019+2},(r,j)=>2020+j),[b,y]=o.useState(new Date().getFullYear()),[m,N]=o.useState([]);return o.useEffect(()=>{fetch(`/dashboard/bendahara/bar-chart-data?year=${b}`).then(r=>r.json()).then(r=>N(r))},[b]),e.jsxs(ee,{children:[e.jsx(Z,{title:"Dashboard"}),e.jsx("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-slate-100 dark:from-slate-900 dark:to-slate-800",children:e.jsxs("main",{className:"container mx-auto px-4 py-8",children:[e.jsxs(p,{className:"p-6 bg-white shadow-sm items-center justify-center mb-4",children:[e.jsx("div",{className:"mb-4",children:e.jsx(be,{from:h,to:v,onSelect:(r,j)=>{u(r),M(j)}})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs(p,{className:"shadow-sm bg-green-500 border-none",children:[e.jsxs(k,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(C,{className:"text-xl text-white font-medium",children:"Total Pemasukan"}),e.jsx(ue,{size:35,className:"bg-green-400 rounded-full p-1 text-white"})]}),e.jsx(_,{children:e.jsx("div",{className:"text-2xl font-bold text-white",children:e.jsx(L,{value:x.pemasukan})})})]}),e.jsxs(p,{className:"shadow-sm bg-red-500 border-none",children:[e.jsxs(k,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(C,{className:"text-xl font-medium text-white",children:"Total Pengeluaran"}),e.jsx(je,{size:35,className:"bg-red-400 rounded-full p-1 text-white"})]}),e.jsx(_,{children:e.jsx("div",{className:"text-2xl font-bold text-white",children:e.jsx(L,{value:x.pengeluaran})})})]}),e.jsxs(p,{className:`shadow-sm ${x.laba_rugi>=0?"bg-blue-500 border-none":"bg-orange-500 border-none"}`,children:[e.jsxs(k,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(C,{className:"text-xl text-white font-medium",children:x.laba_rugi>=0?"Laba":"Rugi"}),x.laba_rugi>=0?e.jsx(J,{size:35,className:"bg-blue-400 rounded-full p-1 text-white"}):e.jsx(fe,{size:35,className:"bg-orange-400 rounded-full p-1 text-white"})]}),e.jsx(_,{children:e.jsx("div",{className:`text-2xl font-bold ${x.laba_rugi>=0,"text-white"}`,children:e.jsx(L,{value:x.laba_rugi})})})]}),e.jsxs(p,{className:"shadow-sm bg-purple-500 border-none",children:[e.jsxs(k,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(C,{className:"text-xl text-white font-medium",children:"Saldo"}),e.jsx(pe,{size:35,className:"bg-purple-400 rounded-full p-1 text-white"})]}),e.jsx(_,{children:e.jsx("div",{className:"text-2xl font-bold text-white",children:e.jsx(L,{value:x.saldo})})})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-2 gap-4 mb-4",children:[e.jsx(p,{className:" p-6 bg-white shadow-sm items-center justify-center",children:e.jsxs("div",{children:[e.jsx("div",{className:"mb-4",children:e.jsxs(F,{value:String(b),onValueChange:r=>y(Number(r)),children:[e.jsx(K,{children:e.jsx(R,{placeholder:"Pilih Tahun"})}),e.jsx(A,{children:l.map(r=>e.jsx(z,{value:String(r),children:r},r))})]})}),e.jsx(ke,{data:m})]})}),e.jsxs(p,{className:"p-4",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Transaksi Terakhir"}),e.jsx("div",{className:"overflow-y-auto overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-sm text-left border border-gray-200",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 border",children:"#"}),e.jsx("th",{className:"px-4 py-2 border",children:"Tanggal"}),e.jsx("th",{className:"px-4 py-2 border",children:"Nama"}),e.jsx("th",{className:"px-4 py-2 border",children:"Pembayaran"}),e.jsx("th",{className:"px-4 py-2 border",children:"Jumlah"})]})}),e.jsx("tbody",{children:t.map((r,j)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-2 border",children:j+1}),e.jsx("td",{className:"px-4 py-2 border",children:ae(r.tanggal_pembayaran.toLocaleString("id-ID"))}),e.jsx("td",{className:"px-4 py-2 border",children:r.mahasiswa.name}),e.jsx("td",{className:"px-4 py-2 border uppercase",children:r.detail_jenis_pembayaran.jenis_pembayaran.nama_pembayaran}),e.jsx("td",{className:"px-4 py-2 border text-right",children:e.jsx(L,{value:r.jumlah})})]},r.id))})]})})]})]}),e.jsxs(p,{className:"p-6 bg-white shadow-sm items-center justify-center",children:[e.jsxs("div",{className:"max-w-xs items-center justify-center mb-4",children:[e.jsx("label",{className:"text-sm font-medium",children:"Semester"}),e.jsxs(F,{value:String(a),onValueChange:r=>i(Number(r)),children:[e.jsx(K,{children:e.jsx(R,{placeholder:"Pilih Semester"})}),e.jsx(A,{children:s.map(r=>e.jsxs(z,{value:String(r.id),children:[r.semester," - ",r.tahun_ajaran]},r.id))})]})]}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:g.map((r,j)=>e.jsxs("div",{children:[" ",e.jsx("div",{className:"space-y-6 items-center justify-center",children:e.jsx("div",{className:"flex max-w-full items-center justify-center",children:e.jsx(ge,{title:r.jenis,data:r.data})})})]},r.jenis||j))})]})]})})]})};export{Qe as default};
