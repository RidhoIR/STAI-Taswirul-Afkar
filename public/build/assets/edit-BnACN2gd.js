import{r as c,X as S,G as D,j as a}from"./app-DFhKXVuD.js";import{B as p}from"./button-C3DzqjnH.js";import{D as b,a as C,b as F,c as N,d as E,e as B,f as T}from"./dialog-rvx_aAIP.js";import{I as d}from"./input-CdV9G3rj.js";import{L as t}from"./label-DSiHCO3T.js";import{B as y}from"./index-ZPmZJPAA.js";import{S as A,a as I,b as P,c as R,d as q}from"./select-gJXadm_8.js";import"./index-Bx6ezrsC.js";import"./x-DV8a7Qcg.js";import"./index-9i6I06m_.js";import"./createLucideIcon-MxNkp8xw.js";import"./iconBase-CdhEkb8C.js";import"./index-BF64Chr5.js";import"./index-DEgVysf_.js";import"./index-DZJxN6LA.js";import"./chevron-down-DlvySfdH.js";import"./check-CWxCMmNt.js";const Z=({anggaran:e})=>{var m;const[u,h]=c.useState(!1),{tridharmas:o}=S().props,{data:s,setData:l,put:j,errors:i,processing:x}=D({tridharma_id:String(e.tridharma),perihal:e.perihal,anggaran:null,jumlah_anggaran:e.jumlah_anggaran}),f=r=>{let g=r.replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,".");return g?`Rp. ${g}`:"Rp. "},_=r=>{let n=r.target.value.replace(/\D/g,"");l("jumlah_anggaran",n)};c.useEffect(()=>{l({tridharma_id:String(e.tridharma),perihal:e.perihal,anggaran:null,jumlah_anggaran:e.jumlah_anggaran})},[e]);const v=r=>{r.preventDefault(),j(route("pengurus.anggaran.update",e.id),{onSuccess:()=>h(!1),onError:n=>console.log("Form submission errors:",n)})};return a.jsx("div",{children:a.jsxs(b,{open:u,onOpenChange:h,children:[a.jsx(C,{asChild:!0,children:a.jsx(p,{variant:"blue",children:a.jsx(y,{})})}),a.jsxs(F,{children:[a.jsxs(N,{children:[a.jsx(E,{children:"Edit Anggaran"}),a.jsx(B,{children:"Ubah informasi perihal dan file anggaran."})]}),a.jsx("form",{onSubmit:v,children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx(t,{htmlFor:"perihal",children:"Perihal"}),a.jsx(d,{id:"perihal",value:s.perihal,onChange:r=>l("perihal",r.target.value),required:!0}),i.perihal&&a.jsx("p",{className:"text-red-600",children:i.perihal})]}),a.jsxs("div",{children:[a.jsx(t,{htmlFor:"tridharma_id",children:"Tridharma"}),a.jsxs(A,{value:s.tridharma_id,onValueChange:r=>l("tridharma_id",r),children:[a.jsx(I,{className:"w-full",children:a.jsx(P,{placeholder:"Pilih Tridharma",children:(m=o.find(r=>r.id===parseInt(s.tridharma_id)))==null?void 0:m.nama})}),a.jsx(R,{children:o.map(r=>a.jsx(q,{value:r.id.toString(),children:r.nama},r.id))})]}),i.tridharma_id&&a.jsx("p",{className:"text-red-600",children:i.tridharma_id})]}),a.jsxs("div",{children:[a.jsx(t,{htmlFor:"jumlah_anggaran",children:"Jumlah Anggaran"}),a.jsx(d,{type:"text",id:"jumlah_anggaran",value:f(s.jumlah_anggaran),onChange:_,required:!0}),i.jumlah_anggaran&&a.jsx("p",{className:"text-red-600",children:i.jumlah_anggaran})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx(t,{htmlFor:"anggaran",children:"File Anggaran (PDF/Word)"}),a.jsx(d,{type:"file",id:"anggaran",onChange:r=>{var n;return l("anggaran",((n=r.target.files)==null?void 0:n[0])||null)}}),i.anggaran&&a.jsx("p",{className:"text-red-500",children:i.anggaran})]}),a.jsx(T,{children:a.jsx(p,{type:"submit",disabled:x,children:"Save Changes"})})]})})]})]})})};export{Z as default};
