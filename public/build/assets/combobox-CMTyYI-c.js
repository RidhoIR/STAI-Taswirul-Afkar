import{r as l,j as y}from"./app-C45odvsW.js";import{R as Ne,P as je,O as Ae,C as Me}from"./x-C2Zn9AI2.js";import{P as j,c as V}from"./index-B2P6MX9l.js";import{b as L}from"./index-BRIxwFix.js";import{c as P}from"./index-HOwh0Hi1.js";import"./dialog-9aZ8i5N5.js";import{S as $e}from"./search-BJhdxuFO.js";import{P as Pe,a as De,b as Fe}from"./popover-B0EHPlDn.js";import{B as Ke}from"./button-BcOaYvYF.js";import{C as Le}from"./chevrons-up-down-CVtQgj66.js";import{C as Oe}from"./check-DYTGHN_k.js";import"./createLucideIcon-B1s5H1ba.js";import"./index-BXcIe4D2.js";import"./index-CoG2NX11.js";var fe=1,qe=.9,Ve=.8,Be=.17,ee=.1,te=.999,ze=.9999,Ge=.99,Ue=/[\\\/_+.#"@\[\(\{&]/,Te=/[\\\/_+.#"@\[\(\{&]/g,He=/[\s-]/,he=/[\s-]/g;function ne(e,n,t,c,o,i,u){if(i===n.length)return o===e.length?fe:Ge;var f=`${o},${i}`;if(u[f]!==void 0)return u[f];for(var b=c.charAt(i),s=t.indexOf(b,o),v=0,h,I,k,R;s>=0;)h=ne(e,n,t,c,s+1,i+1,u),h>v&&(s===o?h*=fe:Ue.test(e.charAt(s-1))?(h*=Ve,k=e.slice(o,s-1).match(Te),k&&o>0&&(h*=Math.pow(te,k.length))):He.test(e.charAt(s-1))?(h*=qe,R=e.slice(o,s-1).match(he),R&&o>0&&(h*=Math.pow(te,R.length))):(h*=Be,o>0&&(h*=Math.pow(te,s-o))),e.charAt(s)!==n.charAt(i)&&(h*=ze)),(h<ee&&t.charAt(s-1)===c.charAt(i+1)||c.charAt(i+1)===c.charAt(i)&&t.charAt(s-1)!==c.charAt(i))&&(I=ne(e,n,t,c,s+1,i+2,u),I*ee>h&&(h=I*ee)),h>v&&(v=h),s=t.indexOf(b,s+1);return u[f]=v,v}function pe(e){return e.toLowerCase().replace(he," ")}function We(e,n,t){return e=t&&t.length>0?`${e+" "+t.join(" ")}`:e,ne(e,n,pe(e),pe(n),0,0,{})}var q='[cmdk-group=""]',re='[cmdk-group-items=""]',Je='[cmdk-group-heading=""]',ge='[cmdk-item=""]',ve=`${ge}:not([aria-disabled="true"])`,le="cmdk-item-select",F="data-value",Xe=(e,n,t)=>We(e,n,t),be=l.createContext(void 0),B=()=>l.useContext(be),xe=l.createContext(void 0),ae=()=>l.useContext(xe),ye=l.createContext(void 0),we=l.forwardRef((e,n)=>{let t=K(()=>{var r,d;return{search:"",value:(d=(r=e.value)!=null?r:e.defaultValue)!=null?d:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),c=K(()=>new Set),o=K(()=>new Map),i=K(()=>new Map),u=K(()=>new Set),f=ke(e),{label:b,children:s,value:v,onValueChange:h,filter:I,shouldFilter:k,loop:R,disablePointerSelection:T=!1,vimBindings:A=!0,...z}=e,H=L(),oe=L(),W=L(),M=l.useRef(null),x=ot();$(()=>{if(v!==void 0){let r=v.trim();t.current.value=r,E.emit()}},[v]),$(()=>{x(6,ue)},[]);let E=l.useMemo(()=>({subscribe:r=>(u.current.add(r),()=>u.current.delete(r)),snapshot:()=>t.current,setState:(r,d,m)=>{var a,p,g,S;if(!Object.is(t.current[r],d)){if(t.current[r]=d,r==="search")_(),X(),x(1,Y);else if(r==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let w=document.getElementById(W);w?w.focus():(a=document.getElementById(H))==null||a.focus()}if(x(7,()=>{var w;t.current.selectedItemId=(w=D())==null?void 0:w.id,E.emit()}),m||x(5,ue),((p=f.current)==null?void 0:p.value)!==void 0){let w=d??"";(S=(g=f.current).onValueChange)==null||S.call(g,w);return}}E.emit()}},emit:()=>{u.current.forEach(r=>r())}}),[]),J=l.useMemo(()=>({value:(r,d,m)=>{var a;d!==((a=i.current.get(r))==null?void 0:a.value)&&(i.current.set(r,{value:d,keywords:m}),t.current.filtered.items.set(r,ie(d,m)),x(2,()=>{X(),E.emit()}))},item:(r,d)=>(c.current.add(r),d&&(o.current.has(d)?o.current.get(d).add(r):o.current.set(d,new Set([r]))),x(3,()=>{_(),X(),t.current.value||Y(),E.emit()}),()=>{i.current.delete(r),c.current.delete(r),t.current.filtered.items.delete(r);let m=D();x(4,()=>{_(),(m==null?void 0:m.getAttribute("id"))===r&&Y(),E.emit()})}),group:r=>(o.current.has(r)||o.current.set(r,new Set),()=>{i.current.delete(r),o.current.delete(r)}),filter:()=>f.current.shouldFilter,label:b||e["aria-label"],getDisablePointerSelection:()=>f.current.disablePointerSelection,listId:H,inputId:W,labelId:oe,listInnerRef:M}),[]);function ie(r,d){var m,a;let p=(a=(m=f.current)==null?void 0:m.filter)!=null?a:Xe;return r?p(r,t.current.search,d):0}function X(){if(!t.current.search||f.current.shouldFilter===!1)return;let r=t.current.filtered.items,d=[];t.current.filtered.groups.forEach(a=>{let p=o.current.get(a),g=0;p.forEach(S=>{let w=r.get(S);g=Math.max(w,g)}),d.push([a,g])});let m=M.current;O().sort((a,p)=>{var g,S;let w=a.getAttribute("id"),G=p.getAttribute("id");return((g=r.get(G))!=null?g:0)-((S=r.get(w))!=null?S:0)}).forEach(a=>{let p=a.closest(re);p?p.appendChild(a.parentElement===p?a:a.closest(`${re} > *`)):m.appendChild(a.parentElement===m?a:a.closest(`${re} > *`))}),d.sort((a,p)=>p[1]-a[1]).forEach(a=>{var p;let g=(p=M.current)==null?void 0:p.querySelector(`${q}[${F}="${encodeURIComponent(a[0])}"]`);g==null||g.parentElement.appendChild(g)})}function Y(){let r=O().find(m=>m.getAttribute("aria-disabled")!=="true"),d=r==null?void 0:r.getAttribute(F);E.setState("value",d||void 0)}function _(){var r,d,m,a;if(!t.current.search||f.current.shouldFilter===!1){t.current.filtered.count=c.current.size;return}t.current.filtered.groups=new Set;let p=0;for(let g of c.current){let S=(d=(r=i.current.get(g))==null?void 0:r.value)!=null?d:"",w=(a=(m=i.current.get(g))==null?void 0:m.keywords)!=null?a:[],G=ie(S,w);t.current.filtered.items.set(g,G),G>0&&p++}for(let[g,S]of o.current)for(let w of S)if(t.current.filtered.items.get(w)>0){t.current.filtered.groups.add(g);break}t.current.filtered.count=p}function ue(){var r,d,m;let a=D();a&&(((r=a.parentElement)==null?void 0:r.firstChild)===a&&((m=(d=a.closest(q))==null?void 0:d.querySelector(Je))==null||m.scrollIntoView({block:"nearest"})),a.scrollIntoView({block:"nearest"}))}function D(){var r;return(r=M.current)==null?void 0:r.querySelector(`${ge}[aria-selected="true"]`)}function O(){var r;return Array.from(((r=M.current)==null?void 0:r.querySelectorAll(ve))||[])}function Q(r){let d=O()[r];d&&E.setState("value",d.getAttribute(F))}function Z(r){var d;let m=D(),a=O(),p=a.findIndex(S=>S===m),g=a[p+r];(d=f.current)!=null&&d.loop&&(g=p+r<0?a[a.length-1]:p+r===a.length?a[0]:a[p+r]),g&&E.setState("value",g.getAttribute(F))}function se(r){let d=D(),m=d==null?void 0:d.closest(q),a;for(;m&&!a;)m=r>0?lt(m,q):at(m,q),a=m==null?void 0:m.querySelector(ve);a?E.setState("value",a.getAttribute(F)):Z(r)}let de=()=>Q(O().length-1),ce=r=>{r.preventDefault(),r.metaKey?de():r.altKey?se(1):Z(1)},me=r=>{r.preventDefault(),r.metaKey?Q(0):r.altKey?se(-1):Z(-1)};return l.createElement(j.div,{ref:n,tabIndex:-1,...z,"cmdk-root":"",onKeyDown:r=>{var d;(d=z.onKeyDown)==null||d.call(z,r);let m=r.nativeEvent.isComposing||r.keyCode===229;if(!(r.defaultPrevented||m))switch(r.key){case"n":case"j":{A&&r.ctrlKey&&ce(r);break}case"ArrowDown":{ce(r);break}case"p":case"k":{A&&r.ctrlKey&&me(r);break}case"ArrowUp":{me(r);break}case"Home":{r.preventDefault(),Q(0);break}case"End":{r.preventDefault(),de();break}case"Enter":{r.preventDefault();let a=D();if(a){let p=new Event(le);a.dispatchEvent(p)}}}}},l.createElement("label",{"cmdk-label":"",htmlFor:J.inputId,id:J.labelId,style:ut},b),U(e,r=>l.createElement(xe.Provider,{value:E},l.createElement(be.Provider,{value:J},r))))}),Ye=l.forwardRef((e,n)=>{var t,c;let o=L(),i=l.useRef(null),u=l.useContext(ye),f=B(),b=ke(e),s=(c=(t=b.current)==null?void 0:t.forceMount)!=null?c:u==null?void 0:u.forceMount;$(()=>{if(!s)return f.item(o,u==null?void 0:u.id)},[s]);let v=Ee(o,i,[e.value,e.children,i],e.keywords),h=ae(),I=N(x=>x.value&&x.value===v.current),k=N(x=>s||f.filter()===!1?!0:x.search?x.filtered.items.get(o)>0:!0);l.useEffect(()=>{let x=i.current;if(!(!x||e.disabled))return x.addEventListener(le,R),()=>x.removeEventListener(le,R)},[k,e.onSelect,e.disabled]);function R(){var x,E;T(),(E=(x=b.current).onSelect)==null||E.call(x,v.current)}function T(){h.setState("value",v.current,!0)}if(!k)return null;let{disabled:A,value:z,onSelect:H,forceMount:oe,keywords:W,...M}=e;return l.createElement(j.div,{ref:V(i,n),...M,id:o,"cmdk-item":"",role:"option","aria-disabled":!!A,"aria-selected":!!I,"data-disabled":!!A,"data-selected":!!I,onPointerMove:A||f.getDisablePointerSelection()?void 0:T,onClick:A?void 0:R},e.children)}),_e=l.forwardRef((e,n)=>{let{heading:t,children:c,forceMount:o,...i}=e,u=L(),f=l.useRef(null),b=l.useRef(null),s=L(),v=B(),h=N(k=>o||v.filter()===!1?!0:k.search?k.filtered.groups.has(u):!0);$(()=>v.group(u),[]),Ee(u,f,[e.value,e.heading,b]);let I=l.useMemo(()=>({id:u,forceMount:o}),[o]);return l.createElement(j.div,{ref:V(f,n),...i,"cmdk-group":"",role:"presentation",hidden:h?void 0:!0},t&&l.createElement("div",{ref:b,"cmdk-group-heading":"","aria-hidden":!0,id:s},t),U(e,k=>l.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":t?s:void 0},l.createElement(ye.Provider,{value:I},k))))}),Qe=l.forwardRef((e,n)=>{let{alwaysRender:t,...c}=e,o=l.useRef(null),i=N(u=>!u.search);return!t&&!i?null:l.createElement(j.div,{ref:V(o,n),...c,"cmdk-separator":"",role:"separator"})}),Ze=l.forwardRef((e,n)=>{let{onValueChange:t,...c}=e,o=e.value!=null,i=ae(),u=N(s=>s.search),f=N(s=>s.selectedItemId),b=B();return l.useEffect(()=>{e.value!=null&&i.setState("search",e.value)},[e.value]),l.createElement(j.input,{ref:n,...c,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":b.listId,"aria-labelledby":b.labelId,"aria-activedescendant":f,id:b.inputId,type:"text",value:o?e.value:u,onChange:s=>{o||i.setState("search",s.target.value),t==null||t(s.target.value)}})}),et=l.forwardRef((e,n)=>{let{children:t,label:c="Suggestions",...o}=e,i=l.useRef(null),u=l.useRef(null),f=N(s=>s.selectedItemId),b=B();return l.useEffect(()=>{if(u.current&&i.current){let s=u.current,v=i.current,h,I=new ResizeObserver(()=>{h=requestAnimationFrame(()=>{let k=s.offsetHeight;v.style.setProperty("--cmdk-list-height",k.toFixed(1)+"px")})});return I.observe(s),()=>{cancelAnimationFrame(h),I.unobserve(s)}}},[]),l.createElement(j.div,{ref:V(i,n),...o,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":f,"aria-label":c,id:b.listId},U(e,s=>l.createElement("div",{ref:V(u,b.listInnerRef),"cmdk-list-sizer":""},s)))}),tt=l.forwardRef((e,n)=>{let{open:t,onOpenChange:c,overlayClassName:o,contentClassName:i,container:u,...f}=e;return l.createElement(Ne,{open:t,onOpenChange:c},l.createElement(je,{container:u},l.createElement(Ae,{"cmdk-overlay":"",className:o}),l.createElement(Me,{"aria-label":e.label,"cmdk-dialog":"",className:i},l.createElement(we,{ref:n,...f}))))}),rt=l.forwardRef((e,n)=>N(t=>t.filtered.count===0)?l.createElement(j.div,{ref:n,...e,"cmdk-empty":"",role:"presentation"}):null),nt=l.forwardRef((e,n)=>{let{progress:t,children:c,label:o="Loading...",...i}=e;return l.createElement(j.div,{ref:n,...i,"cmdk-loading":"",role:"progressbar","aria-valuenow":t,"aria-valuemin":0,"aria-valuemax":100,"aria-label":o},U(e,u=>l.createElement("div",{"aria-hidden":!0},u)))}),C=Object.assign(we,{List:et,Item:Ye,Input:Ze,Group:_e,Separator:Qe,Dialog:tt,Empty:rt,Loading:nt});function lt(e,n){let t=e.nextElementSibling;for(;t;){if(t.matches(n))return t;t=t.nextElementSibling}}function at(e,n){let t=e.previousElementSibling;for(;t;){if(t.matches(n))return t;t=t.previousElementSibling}}function ke(e){let n=l.useRef(e);return $(()=>{n.current=e}),n}var $=typeof window>"u"?l.useEffect:l.useLayoutEffect;function K(e){let n=l.useRef();return n.current===void 0&&(n.current=e()),n}function N(e){let n=ae(),t=()=>e(n.snapshot());return l.useSyncExternalStore(n.subscribe,t,t)}function Ee(e,n,t,c=[]){let o=l.useRef(),i=B();return $(()=>{var u;let f=(()=>{var s;for(let v of t){if(typeof v=="string")return v.trim();if(typeof v=="object"&&"current"in v)return v.current?(s=v.current.textContent)==null?void 0:s.trim():o.current}})(),b=c.map(s=>s.trim());i.value(e,f,b),(u=n.current)==null||u.setAttribute(F,f),o.current=f}),o}var ot=()=>{let[e,n]=l.useState(),t=K(()=>new Map);return $(()=>{t.current.forEach(c=>c()),t.current=new Map},[e]),(c,o)=>{t.current.set(c,o),n({})}};function it(e){let n=e.type;return typeof n=="function"?n(e.props):"render"in n?n.render(e.props):e}function U({asChild:e,children:n},t){return e&&l.isValidElement(n)?l.cloneElement(it(n),{ref:n.ref},t(n.props.children)):t(n)}var ut={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const Ce=l.forwardRef(({className:e,...n},t)=>y.jsx(C,{ref:t,className:P("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",e),...n}));Ce.displayName=C.displayName;const Se=l.forwardRef(({className:e,...n},t)=>y.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[y.jsx($e,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),y.jsx(C.Input,{ref:t,className:P("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",e),...n})]}));Se.displayName=C.Input.displayName;const Ie=l.forwardRef(({className:e,...n},t)=>y.jsx(C.List,{ref:t,className:P("max-h-[300px] overflow-y-auto overflow-x-hidden",e),...n}));Ie.displayName=C.List.displayName;const st=l.forwardRef((e,n)=>y.jsx(C.Empty,{ref:n,className:"py-6 text-center text-sm",...e}));st.displayName=C.Empty.displayName;const dt=l.forwardRef(({className:e,...n},t)=>y.jsx(C.Group,{ref:t,className:P("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",e),...n}));dt.displayName=C.Group.displayName;const ct=l.forwardRef(({className:e,...n},t)=>y.jsx(C.Separator,{ref:t,className:P("-mx-1 h-px bg-border",e),...n}));ct.displayName=C.Separator.displayName;const Re=l.forwardRef(({className:e,...n},t)=>y.jsx(C.Item,{ref:t,className:P("relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",e),...n}));Re.displayName=C.Item.displayName;const It=({data:e,value:n,onChange:t})=>{const[c,o]=l.useState(!1),i=e.find(u=>u.id.toString()===n);return y.jsxs(Pe,{open:c,onOpenChange:o,children:[y.jsx(De,{asChild:!0,children:y.jsxs(Ke,{variant:"outline",role:"combobox",className:"w-full justify-between",children:[i?i.name:"Pilih mahasiswa",y.jsx(Le,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),y.jsx(Fe,{className:"w-full p-0",children:y.jsxs(Ce,{children:[y.jsx(Se,{placeholder:"Cari mahasiswa..."}),y.jsx(Ie,{children:e.map(u=>y.jsxs(Re,{value:u.id.toString(),onSelect:()=>{t(u.id.toString()),o(!1)},children:[y.jsx(Oe,{className:P("mr-2 h-4 w-4",u.id.toString()===n?"opacity-100":"opacity-0")}),u.name]},u.id))})]})})]})};export{It as default};
